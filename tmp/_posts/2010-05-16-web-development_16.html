---
layout: post
title: "Web development: Реализация бизнес отображения"
date: 2010-05-16T15:37:00+03:00
comments: false
categories:
 - MVC
 - asp.net
 - UI
---

<div class='post'>
Теперь, когда бизнес объект и объект данных готов, можно переходить непосредсвенно к реализации интерфейса функции. 
    <br />
    <br />
    <h2>Страница регистрации</h2>
    <br />
    <br />
    Страница регистрации выглядит следующим образом: 
    <br />
    <br />
    <a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://4.bp.blogspot.com/_stL4bIIuRUs/S-_nQeGdfcI/AAAAAAAAGns/sq-Lq7oW8Uw/s1600/registration-layout.jpg"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 252px;" src="http://4.bp.blogspot.com/_stL4bIIuRUs/S-_nQeGdfcI/AAAAAAAAGns/sq-Lq7oW8Uw/s400/registration-layout.jpg" border="0" alt=""id="BLOGGER_PHOTO_ID_5471846342422527426" /></a>
    <br />
    <br />
    <h2>Разработка</h2>
    <br />
    <br />    
    Требуется ввести и-мейл, секретную фразу (будет использована для функции востановления пароля) и сам пароль. Код страницы:
    <br />
    <br />
    <!-- Page layout code Registration.aspx !-->
<blockquote><code><font size="2" face="Courier New" color="black"><font>&#60;%@ Page Language="C#" MasterPageFile="~/Concept.Master" AutoEventWireup="true" CodeBehind="Registration.aspx.cs" Inherits="WebApplication.RegistrationView" Title="Registration" %&#62;</font><br><font color="#0000ff">&#60;</font><font color="#800000">asp:Content</font> <font color="#ff0000">ID</font><font color="#0000ff">="Content1"</font> <font color="#ff0000">ContentPlaceHolderID</font><font color="#0000ff">="head"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;</font><br><font color="#0000ff">&#60;/</font><font color="#800000">asp:Content</font><font color="#0000ff">&#62;</font><br><font color="#0000ff">&#60;</font><font color="#800000">asp:Content</font> <font color="#ff0000">ID</font><font color="#0000ff">="Content2"</font> <font color="#ff0000">ContentPlaceHolderID</font><font color="#0000ff">="ContentPlaceHolder1"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">h2</font><font color="#0000ff">&#62;</font>Please register on Web development site<font color="#0000ff">&#60;/</font><font color="#800000">h2</font><font color="#0000ff">&#62;&#60;</font><font color="#800000">br</font> <font color="#0000ff">/&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">div</font> <font color="#ff0000">class</font><font color="#0000ff">="box"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Email: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="EmailText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Secret Phrase: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="SecretPhraseText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Password: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="PasswordText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>&#38;nbsp<font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:Button</font> <font color="#ff0000">ID</font><font color="#0000ff">="Submit"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#ff0000">Text</font><font color="#0000ff">="Register now!"</font> <font color="#ff0000">CssClass</font><font color="#0000ff">="button"</font><font color="#0000ff">/&#62;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">div</font><font color="#0000ff">&#62;</font><br><font color="#0000ff">&#60;/</font><font color="#800000">asp:Content</font><font color="#0000ff">&#62;</font><br></font><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>    
    <br />
    <br />
    Все очень просто, лейблы, ASP.net контролы ввода текста, и кнопка сабмита формы. Тепеь перейдем к code-behind классу страницы, основная работа будет сосредоточенна там. Пока что это "пустой", ничего не делающий класс, имеющий однин метод Page_Load. Страница регистрации должна реализовавать интерфейс отображения, который мы спроектировани в прошлой статье. Поэтому, страницу RegistrationView мы наследуем от IRegistrationView, и генерируем методы, реализующие методы интерфейса.
    <br />
    <br />
    <!-- Registration view code Registration.aspx.cs !-->
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">using</font> System;<br><font color="#0000ff">using</font> System.Collections;<br><font color="#0000ff">using</font> System.Configuration;<br><font color="#0000ff">using</font> System.Data;<br><font color="#0000ff">using</font> System.Linq;<br><font color="#0000ff">using</font> System.Web;<br><font color="#0000ff">using</font> System.Web.Security;<br><font color="#0000ff">using</font> System.Web.UI;<br><font color="#0000ff">using</font> System.Web.UI.WebControls;<br><font color="#0000ff">using</font> System.Web.UI.WebControls.WebParts;<br><font color="#0000ff">using</font> System.Web.UI.HtmlControls;<br><font color="#0000ff">using</font> System.Xml.Linq;<br><font color="#0000ff">using</font> Company.Projects.Views;<br><font color="#0000ff">using</font> Company.Product.BLL;<br><font color="#0000ff">using</font> Company.Product.DAL;<br><br><font color="#0000ff">namespace</font> WebApplication<br>{<br>&nbsp;&nbsp;<font color="#0000ff">public</font> <font color="#0000ff">partial</font> <font color="#0000ff">class</font> RegistrationView : System.Web.UI.<font color="#2B91AF">Page</font>, IRegistrationView<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">private</font> Registration _registration; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">protected</font> <font color="#0000ff">void</font> Page_Load(<font color="#0000ff">object</font> sender, <font color="#2B91AF">EventArgs</font> e)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_registration = <font color="#0000ff">new</font> Registration(<font color="#0000ff">this</font>, <font color="#0000ff">new</font> RegistrationData());<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">if</font> (<font color="#2B91AF">Page</font>.IsPostBack)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">#region</font> IRegistrationView Members<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">public</font> <font color="#0000ff">void</font> Success()<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">public</font> <font color="#0000ff">void</font> Fail(<font color="#0000ff">string</font> p)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">#endregion</font><br>&nbsp;&nbsp;}<br>}<br></font><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
    <br />
    <br />     
    Подумаем над тем, как будем сообщать пользателю об успехе или неудаче регистрации. При успехе, пользователь должен увидеть сообщениие об успешной регистрации с предложением вернутся на главную страницу, в случае неудачи сообщить об ошибке и предложить повторить операцию еще раз. Для реализации опционального показа того или иного сообщения, в зависимости от ситуации, мы воспользуемся <a href="http://msdn.microsoft.com/en-us/library/3ek2z7fh(VS.85).aspx"> MultiView</a> контролом. Добавим 3 view, соотвенно для формы регистрации, формы сообщениия о успехе, формы о сообщении об ошибке.
    <br />
    <br />
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">&#60;</font><font color="#800000">asp:Content</font> <font color="#ff0000">ID</font><font color="#0000ff">="Content2"</font> <font color="#ff0000">ContentPlaceHolderID</font><font color="#0000ff">="ContentPlaceHolder1"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">h2</font><font color="#0000ff">&#62;</font>Please register on Web development site<font color="#0000ff">&#60;/</font><font color="#800000">h2</font><font color="#0000ff">&#62;&#60;</font><font color="#800000">br</font> <font color="#0000ff">/&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">div</font> <font color="#ff0000">class</font><font color="#0000ff">="box"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">asp:MultiView</font> <font color="#ff0000">ID</font><font color="#0000ff">="RegistrationMultiView"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#ff0000">ActiveViewIndex</font><font color="#0000ff">="0"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">asp:View</font> <font color="#ff0000">ID</font><font color="#0000ff">="RegistrationForm"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Email: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="EmailText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Secret Phrase: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="SecretPhraseText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Password: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="PasswordText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>&#38;nbsp<font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:Button</font> <font color="#ff0000">ID</font><font color="#0000ff">="Submit"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#ff0000">Text</font><font color="#0000ff">="Register now!"</font> <font color="#ff0000">CssClass</font><font color="#0000ff">="button"</font><font color="#0000ff">/&#62;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">asp:View</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">asp:View</font> <font color="#ff0000">ID</font><font color="#0000ff">="SuccessForm"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">asp:View</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">asp:View</font> <font color="#ff0000">ID</font><font color="#0000ff">="FailedForm"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">asp:View</font><font color="#0000ff">&#62;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">asp:MultiView</font><font color="#0000ff">&#62;</font> <br>&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">div</font><font color="#0000ff">&#62;</font><br><font color="#0000ff">&#60;/</font><font color="#800000">asp:Content</font><font color="#0000ff">&#62;</font><br></font><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
    <br />
    <br />
    Code-behind страницы поменяем так, чтобы он реагировал на сигналы о статусе операции, соответсвующим переключением views в multiview. 
    <br />
    <br />
    <!-- Register view implementation methods Register.aspx.cs !-->
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">#region</font> IRegistrationView Members<br><br><font color="#0000ff">public</font> <font color="#0000ff">void</font> Success()<br>{<br>&nbsp;&nbsp;RegistrationMultiView.SetActiveView(SuccessForm);<br>}<br><br><font color="#0000ff">public</font> <font color="#0000ff">void</font> Fail(<font color="#0000ff">string</font> p)<br>{<br>&nbsp;&nbsp;RegistrationMultiView.SetActiveView(FailedForm);<br>}<br><br><font color="#0000ff">#endregion</font><br></font><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
    <br />
    <br />        
    Запустим приложение под дебаггером и убедимся, что методы Success и Fail успешно вызываются, в зависимости от статуса операции. Осталось добавить только необходимый HTML на страницу, а также код управляющий содержанием сообщений.
    <br />
    <br />
    Код страницы:
    <!-- Register.aspx !-->
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">&#60;</font><font color="#800000">asp:Content</font> <font color="#ff0000">ID</font><font color="#0000ff">="Content2"</font> <font color="#ff0000">ContentPlaceHolderID</font><font color="#0000ff">="ContentPlaceHolder1"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">h2</font><font color="#0000ff">&#62;</font>Please register on Web development site<font color="#0000ff">&#60;/</font><font color="#800000">h2</font><font color="#0000ff">&#62;&#60;</font><font color="#800000">br</font> <font color="#0000ff">/&#62;</font><br>&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">div</font> <font color="#ff0000">class</font><font color="#0000ff">="box"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">asp:MultiView</font> <font color="#ff0000">ID</font><font color="#0000ff">="RegistrationMultiView"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#ff0000">ActiveViewIndex</font><font color="#0000ff">="0"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">asp:View</font> <font color="#ff0000">ID</font><font color="#0000ff">="RegistrationForm"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Email: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="EmailText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Secret Phrase: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="SecretPhraseText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>Password: <font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:TextBox</font> <font color="#ff0000">ID</font><font color="#0000ff">="PasswordText"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#ff0000">TextMode</font><font color="#0000ff">="Password"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">asp:TextBox</font><font color="#0000ff">&#62;</font>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font><font color="#0000ff">&#62;</font>&#38;nbsp<font color="#0000ff">&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font> <font color="#0000ff">&#60;</font><font color="#800000">asp:Button</font> <font color="#ff0000">ID</font><font color="#0000ff">="Submit"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#ff0000">Text</font><font color="#0000ff">="Register now!"</font> <font color="#ff0000">CssClass</font><font color="#0000ff">="button"</font><font color="#0000ff">/&#62;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">asp:View</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">asp:View</font> <font color="#ff0000">ID</font><font color="#0000ff">="SuccessForm"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font> <font color="#ff0000">ID</font><font color="#0000ff">="SuccessMessage"</font> <font color="#ff0000">class</font><font color="#0000ff">="green"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">asp:View</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">asp:View</font> <font color="#ff0000">ID</font><font color="#0000ff">="FailedForm"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font> <font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;</font><font color="#800000">label</font> <font color="#ff0000">ID</font><font color="#0000ff">="FailMessage"</font> <font color="#ff0000">class</font><font color="#0000ff">="red"</font> <font color="#ff0000">runat</font><font color="#0000ff">="server"</font><font color="#0000ff">&#62;&#60;/</font><font color="#800000">label</font><font color="#0000ff">&#62;</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">asp:View</font><font color="#0000ff">&#62;</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">asp:MultiView</font><font color="#0000ff">&#62;</font> <br>&nbsp;&nbsp;<font color="#0000ff">&#60;/</font><font color="#800000">div</font><font color="#0000ff">&#62;</font><br><font color="#0000ff">&#60;/</font><font color="#800000">asp:Content</font><font color="#0000ff">&#62;</font><br></font><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
    <br />
    <br />
    Инициализация сообщений:
    <!-- Register.aspx.cs !-->
<blockquote><code><font size="2" face="Courier New" color="black"><font color="#0000ff">#region</font> IRegistrationView Members<br><br><font color="#0000ff">public</font> <font color="#0000ff">void</font> Success()<br>{<br>&nbsp;&nbsp;SuccessMessage.InnerHtml = <font color="#A31515">@"Congratulations! You've been successfully registered on Web Developement web site."</font>;<br>&nbsp;&nbsp;SuccessMessage.InnerHtml += <font color="#A31515">@"&#60;br /&#62;&#60;br /&#62;Return to &#60;a href="</font><font color="#A31515">"Default.aspx"</font><font color="#A31515">"&#62;Main page&#60;/a&#62;."</font>;<br>&nbsp;&nbsp;RegistrationMultiView.SetActiveView(SuccessForm);<br>}<br><br><font color="#0000ff">public</font> <font color="#0000ff">void</font> Fail(<font color="#0000ff">string</font> p)<br>{<br>&nbsp;&nbsp;FailMessage.InnerHtml = p;<br>&nbsp;&nbsp;FailMessage.InnerHtml += <font color="#A31515">"&#60;br /&#62;&#60;br /&#62;Please try register again."</font>;&nbsp;&nbsp;<br>&nbsp;&nbsp;RegistrationMultiView.SetActiveView(FailedForm);<br>}<br><br><font color="#0000ff">#endregion</font><br></font><br><font size="1" color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font size="1" color="gray">Source Code Highlighter</font></a>.</font></code></blockquote>
    <br />
    <br />    
    <h2>Тестирование</h2>
    <br />
    <br />
    Когда весь код находится в сборе, самое время запустить приложение и посмотреть, как оно работает. Поехали:
    <br />
    <br />
    Заполняем форму регистрации:
    <br />
    <br />
    <a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_stL4bIIuRUs/S-_ned5MFUI/AAAAAAAAGn0/zyh6fuT5Yf8/s1600/registration-input.jpg"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 252px;" src="http://3.bp.blogspot.com/_stL4bIIuRUs/S-_ned5MFUI/AAAAAAAAGn0/zyh6fuT5Yf8/s400/registration-input.jpg" border="0" alt=""id="Img1" /></a>
    <br />
    <br />
    Нажимаем кнопку регистрации, и получаем сообщение об успешной операции:
    <br />
    <br />
    <a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_stL4bIIuRUs/S-_nlj_dlDI/AAAAAAAAGn8/dwQV4rqYr1s/s1600/registration-success.jpg"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 252px;" src="http://1.bp.blogspot.com/_stL4bIIuRUs/S-_nlj_dlDI/AAAAAAAAGn8/dwQV4rqYr1s/s400/registration-success.jpg" border="0" alt=""id="Img2" /></a>
    <br />
    <br />            
    Повторим регистрацию с тем же и-мейлом:
    <br />
    <br />
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://3.bp.blogspot.com/_stL4bIIuRUs/S-_nxdbINLI/AAAAAAAAGoE/H-bnr-PGLAA/s1600/registration-input2.jpg"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 252px;" src="http://3.bp.blogspot.com/_stL4bIIuRUs/S-_nxdbINLI/AAAAAAAAGoE/H-bnr-PGLAA/s400/registration-input2.jpg" border="0" alt=""id="Img3" /></a>
    <br />
    <br />      
    В результате чего, получим сообщение, что пользователь с данным и-мейлом уже существует.
    <br />
    <br />
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_stL4bIIuRUs/S-_n68AJv8I/AAAAAAAAGoM/Q0FwmIZLnjs/s1600/registration-fail1.jpg"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 252px;" src="http://2.bp.blogspot.com/_stL4bIIuRUs/S-_n68AJv8I/AAAAAAAAGoM/Q0FwmIZLnjs/s400/registration-fail1.jpg" border="0" alt=""id="Img4" /></a>
    <br />
    <br />                 
    Проверим кейс, когда существую какие либо проблемы с базой. Для тестирования я взял и перенес содержимое папки App_Data во временный фолдер, таким образом приложение не сможет успешно соеденится с базой данных.  
    <br />
    <br />
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_stL4bIIuRUs/S-_oCQQq0DI/AAAAAAAAGoU/h6JdKbanDeY/s1600/registration-fail2.jpg"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 252px;" src="http://1.bp.blogspot.com/_stL4bIIuRUs/S-_oCQQq0DI/AAAAAAAAGoU/h6JdKbanDeY/s400/registration-fail2.jpg" border="0" alt=""id="Img5" /></a>
    <br />
    <br />                 
    <h2>Заключение</h2>     
    <br />
    <br />                 
    В этой статье мы завершили реализацию функции регистрации на сайте, с помощью средств ASP.net Web Forms, используя парадигму MVC, и TDD как практику разработки.  Следующих я покажу примеры интерграционного тестирования страницы, а также мы разработаем валидацию и функцию восстановления пароля с помощь AJAX. 
    <br />
    <br /></div>

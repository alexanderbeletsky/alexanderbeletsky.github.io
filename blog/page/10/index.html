
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Alexander Beletsky's development blog</title>
  <meta name="author" content="Alexander Beletsky">

  
  <meta name="description" content="New Tools in My TDD Arsenal Feb 2nd, 2012 Clean Code, Mocks, TDD, Tools Recently my TDD arsenal has been enhanced with 3 new cool tools, which I&# &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://beletsky.net/blog/page/10/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/fontello.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/pure-min.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Alexander Beletsky's development blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:800' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-16388698-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>


<body>
	<header class="pure-g-r"><div class="pure-g-r">
	<div class="inner pure-u-1">
		<h4 class="light">Alexander Beletsky's development blog</h4>
		<h1><a href="/">My profession is engineering</a></h1>
		<nav role="navigation" class="pure-menu pure-menu-open pure-menu-horizontal light"><ul>
	<li><a href="/projects">Projects</a></li>
	<li><a href="/talks">Talks</a></li>
	<li><a href="/medium">Medium</a></li>
	<li><a href="/blog/archives">Archive</a></li>
	<li><a href="/about">About me</a></li>
</ul>

</nav>
	</div>
</div>

</header>
	<div class="social inner pure-menu-horizontal"><ul>
	<li><a class="twitter icon-twitter" href="http://twitter.com/alexbeletsky"></a></li>
	<li><a class="github icon-github-circled" href="https://github.com/alexanderbeletsky"></a></li>
	<li><a class="stackoverflow icon-stackoverflow" href="http://stackoverflow.com/users/386751/alexanderb"></a></li>
	<li><a class="rss icon-rss" href="http://feeds.feedburner.com/abeletskyblog"></a></li>
</ul>
</div>
	<div id="content" class="inner pure-g-r"><div class="blog-index">
  
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2012/02/new-tools-in-my-tdd-arsenal.html">
    
      New Tools in My TDD Arsenal</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2012-02-02T11:36:00+02:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2012</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/clean-code/'>Clean Code</a>, <a class='category' href='/blog/categories/mocks/'>Mocks</a>, <a class='category' href='/blog/categories/tdd/'>TDD</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>Recently my TDD arsenal has been enhanced with 3 new cool tools, which I&#8217;m about to share with you. More precisely it one tool and two frameworks. Let&#8217;s go for it.<br />
</p><h2>NCrunch<br />
</h2><p><a href="http://www.ncrunch.net/">NCrunch</a> is just amazing extension for Visual Studio created by <a href="https://twitter.com/#!/remcomulder">@remcomulder</a>. It automatically detects all your tests and re-running those as soon as source code changes happen. Forget about manual test re-running, it&#8217;s just waste of time. You even do not need to press Ctrl + S, just continue coding as you usually do. <br />
</p><p>Initially I had big doubts about such kind of tools, but NCrunch changed my mind. It supports major unit test frameworks NUnit, XUnit, MSpec etc. Besides of that it allows to collect code coverage metrics (and show it just in VS editor), run tests under debugger, supports multi-core systems etc.<br />
</p><p>In short, NCruch is something that makes your TDD very smooth, allowing to focusing on important things and forgot about some routine.<br />
</p><a href="https://lh3.googleusercontent.com/-SG_xDY5wvDo/TypXmx-VFGI/AAAAAAAAH3o/S46jODLRr5Q/s620/image-1.jpg"><br />
<img src="https://lh3.googleusercontent.com/-SG_xDY5wvDo/TypXmx-VFGI/AAAAAAAAH3o/S46jODLRr5Q/s620/image-1.jpg" alt="ncrunch" /><br />
</a><br />
<h2>NSubstitute<br />
</h2><p>I stick to <a href="http://code.google.com/p/moq/">Moq</a> for quite awhile and saw no reason to switch it.. Till I saw <a href="http://nsubstitute.github.com/">NSubsitute</a>. I hardly could imagine someone who staring &#8220;yet another mocking framework project&#8221;, it looks like absolute non-sense.. But <a href="https://github.com/nsubstitute">those</a> guys proves me wrong.<br />
</p><p>Well, what&#8217;s so new there? First of all it have very clean API. No more <code>new Mock()</code> or <code>MockGenerator.GenerateMock()</code>, creation of test doubles are nothing more as <code>Substitute.For&lt;IEntityToMock&gt;()</code>. Mocking properties, multiple return values, events etc. in very easy fashion. Check out their <a href="http://nsubstitute.github.com/help/getting-started/">getting started</a> materials for further info. <br />
</p><p>Best feature as for me, that by using extension methods they got rid of lambdas for setting up mocks. It makes test code more readable and clean. See this small <a href="https://gist.github.com/1722396">gist</a> there I placed just some Moq and NSubstitue tests together.<br />
</p><p>I would not say that Rhino or Moq is now much worse that NSubstitute.. No, I would just say NSubstitute is a little better. Even same functionality, with less amount of code is already big argument for me.<br />
</p><pre class="brush: csharp">[Test]
public void should_send_an_email_if_users_signs_up_nsub()
{ 
 // arrange
 var emailService = Substitute.For&lt;IEMailService&gt;();
 var controller = new LoginController(emailService);

 // act
 controller.SignUp(new SignUpModel { Email = &quot;a@a.com&quot;, Password = &quot;xxx&quot; });

 // assert
 emailService.Received().SendEmail(Arg.Any&lt;EmailMessage&gt;(), &quot;current&quot;);
}
</pre><h2>FluentAssertions<br />
</h2><p>Again, for years I followed classic NUnit&#8217;s <code>Assert.That()</code> method. I also played a bit with <a href="http://sharptestex.codeplex.com/">SharpTestsEx</a>, but FluentAssertions by <a href="https://twitter.com/#!/ddoomen">@ddoomen</a> is going to change that.<br />
</p><p>FluentAssertions are based on extension methods and allows you to get rid of Assert.That call and just wrote your assertion directly to object. Here some example: <br />
</p><pre class="brush: csharp">{
    // NUnit.Assert style..
    Assert.That(result, Is.EqualTo(3));

    // FluentAssert style..
    result.Should().Be(3);
}
</pre><p>This is very simple example. The power of FluentAssertions arise then you need to have either multiple assertions or assertions on complex objects. Multiple assertion could be combined by <code>And</code>, like:<br />
</p><pre class="brush: csharp">{
    "somestring".Should().Contain("some").And.HaveLength(10);
}
</pre><p>It also provides great support for working with Collections, DateTimes, Guids, Exceptions, XML etc. Project is hosted on codeplex, here is <a href="http://fluentassertions.codeplex.com/documentation">documentation</a>. Easy start, easy go.<br />
</p><h2>Conclusions</h2><p>Now, I&#8217;m sharpening my axe on those tools and have very nice impressions so far. Special thanks goes to <a href="https://twitter.com/#!/skalinets">@skalinets</a> who introduced me with those tools.<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2012/01/agile-base-camp-2012.html">
    
      Agile Base Camp 2012</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2012-01-30T20:54:00+02:00" pubdate data-updated="true">Jan 30<span>th</span>, 2012</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/conference/'>Conference</a>, <a class='category' href='/blog/categories/continuous/'>Continuous</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>Past Saturday I was a part of big Ukrainian event <a href="http://agilebasecamp.org/">Agile Base Camp: From Idea to Product</a>. It&#8217;s been organized by <a href="http://www.scrumguides.com/">ScrumGuides</a>, pioneers on Agile in Ukraine and organizers of famous <a href="http://www.beletsky.net/search/label/Agile">Agilee</a> series of conferences.<br />
</p><p>The conference named &#8220;From Idea to Product&#8221; and focused on product development issues. There was 3 stages there: Main, XP, UX. Main is for more or less common topics as budgeting, motivation etc.. XP is practical stage for developers and UX for user experience engineers. The program of conference was really interesting, but I spend all my day on XP stage (no surprise).<br />
</p><p>There were great speeches by <a href="http://twitter.com/dmytromindra">Dmytro Mindra</a>, <a href="http://twitter.com/skaninets">Sergey Kalinets</a>. Probably most valuable for me were ones by <a href="http://twitter.com/vitaliystakhov">Vitaliy Stakhov</a> and <a href="http://twitter.com/_TLK">Anatoly Kolesnik</a>, Vitaliy shared Hypermedia concepts of RESTfull systems and that looks very promising. Anatoly did great NoSQL introduction that is very actual at the moment. I also enjoyed <a href="https://twitter.com/defimenko">Dmitry Efimenko</a> speech about testing in product company. He did it in quite tough style, so crowd was a little shocked and kept silence till the last words. I got some interesting points for myself.     <br />
</p><p>I did a talk about - Continues Delivery / Deployment / Production. This practical field is very interesting to me not only because I&#8217;m trying to <a href="http://www.beletsky.net/2012/01/pre-announce-of-release-candidate.html">build a product</a> for that and I want to adapt for all project I work to.   <br />
</p><a href="https://lh3.googleusercontent.com/-pNWAtW5oWu8/TybgzFR4zWI/AAAAAAAAH3g/HxLkTCyvV1A/s720/395323_283771048348762_248481618544372_777581_1168321183_n.jpg"><br />
<img src="https://lh3.googleusercontent.com/-pNWAtW5oWu8/TybgzFR4zWI/AAAAAAAAH3g/HxLkTCyvV1A/s620/395323_283771048348762_248481618544372_777581_1168321183_n.jpg" alt="alexander beletsky" /><br />
</a><br />
<p>I&#8217;ve got very nice feedback and questions after my speech, totally collected 15 donuts (a special cards that listeners give to speaker if they like the speech), so I was quite happy about. If you interested, here is my <a href="http://speakerdeck.com/u/alexanderbeletsky/p/when">slides</a> on speaker deck.<br />
</p><script src="http://speakerdeck.com/embed/4f225b72a0a84d001f019c7b.js" type="text/javascript"></script><br />
<p>I really much enjoyed after party and evening we spent in Work&#8217;N&#8217;Roll, the co-working office of <a href="http://www.scrumguides.com/">ScrumGuides</a>. Appreciate organizers for that job and wish you good luck of all next events.<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2012/01/convention-based-ioc-configuration.html">
    
      Convention based IoC configuration</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2012-01-24T16:54:00+02:00" pubdate data-updated="true">Jan 24<span>th</span>, 2012</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/clean-code/'>Clean Code</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>What&#8217;s your favorite IoC container framework? For quite long time I stick to <a href="">Ninject</a>. First time I read about it in Steve Sanders ASP.NET MVC2 book and it&#8217;s my favorite container since then. But this blog post does not aim particular IoC framework, rather approach you can use. For code examples I&#8217;ll still be using Ninject, through.<br />
</p><h2>What&#8217;s are conventions?<br />
</h2><p><a href="http://en.wikipedia.org/wiki/Convention_over_configuration">Convention over configuration</a> is very popular trend nowadays. Many frameworks trying to adopt it, including ASP.NET MVC. In short, that means you are relying on some front-know conventions, like names of files, folder or classes and system does something meaningful, based on those conventions. Like, all controllers in ASP.NET MVC should have &#8220;Controller&#8221; postfix, so the framework is able to find and <a href="http://www.beletsky.net/2011/12/inside-aspnet-mvc-instantiation-of.html">instantiate</a> it. <br />
</p><p>Conventions make a developer&#8217;s life a little easier, you are no longer spending efforts on configuration, instead following some simple rules. <br />
</p><h2>What we have for IoC?<br />
</h2><p>My <a href="http://en.wikipedia.org/wiki/Shuhari">&#8220;Shu&#8221;</a> level of IoC containers learning was configuration based. This is something you learn at very beginning. So, in case of Ninject, sooner of later you have huge file with dependencies configuration: <br />
</p><pre class="brush: csharp">/// &lt;summary&gt;
/// Load your modules or register your services here!
/// &lt;/summary&gt;
/// &lt;param name=&quot;kernel&quot;&gt;The kernel.&lt;/param&gt;
private static void RegisterServices(IKernel kernel)
{
 kernel.Bind&lt;ISettingsManager&gt;().To&lt;SettingsManager&gt;();
 kernel.Bind&lt;IDirectoryProvider&gt;().To&lt;DirectoryProvider&gt;().InSingletonScope();
 kernel.Bind&lt;ISetupFactory&gt;().To&lt;SetupFactory&gt;();
 kernel.Bind&lt;ITargetsObjectBuilder&gt;().To&lt;DefaultTargetsObjectBuilder&gt;();
 kernel.Bind&lt;ITargetsBuilder&gt;().To&lt;TargetsBuilder&gt;();
 kernel.Bind&lt;IBounceFactory&gt;().To&lt;BounceFactory&gt;();
 kernel.Bind&lt;ITargetsRetriever&gt;().To&lt;TargetsRetriever&gt;();
 kernel.Bind&lt;IConfigObjectBuilder&gt;().To&lt;ConfigObjectBuilder&gt;();
 kernel.Bind&lt;ILoggerFactory&gt;().To&lt;LoggerFactory&gt;();
 kernel.Bind&lt;IHashService&gt;().To&lt;HashService&gt;();
 kernel.Bind&lt;IAuthentication&gt;().To&lt;Authentication&gt;();
 kernel.Bind&lt;IConfigurationsFactory&gt;().To&lt;ConfigurationsFactory&gt;();
 
 // More, more, more...
}
</pre><p>As more your application grows, as more services, repositories, factories you have. As long <code>RegisterServices</code> method becomes longer, as more you forgot to correct correct it after some new dependency added, so you see YSOD during application run.<br />
</p><p>But please, put your attention to interface and class names. What we have here - <code>ISettingsManager</code> and <code>SettingsManager</code>; <code>IDirectoryProvider</code> and <code>DirectoryProvider</code>.. <code>ILoggerFactory</code> and <code>LoggerFactory</code>. Do you see pattern here? Exactly, it is [&#8220;I&#8221; + entity name] for interfaces and [entity name] for implementation.<br />
</p><p>Here we go for <a href="http://en.wikipedia.org/wiki/Shuhari">&#8220;Ha&#8221;</a> level of IoC and apply convention based configuration.<br />
</p><h2>Convention over configuration</h2><p>Let&#8217;s take an advance of the fact above and shrink our configuration code. First of all, you need to get great extension for Ninject, called <a href="http://nuget.org/packages/ninject.extensions.conventions/2.2.0.5">ninject.extensions.conventions</a>.<br />
</p><p>After the package is installed, the simples Ninject start-up code ever would be:<br />
</p><pre class="brush: csharp">/// &lt;summary&gt;
/// Load your modules or register your services here!
/// &lt;/summary&gt;
/// &lt;param name=&quot;kernel&quot;&gt;The kernel.&lt;/param&gt;
private static void RegisterServices(IKernel kernel)
{
 kernel.Scan(scanner =&gt;
     {
      scanner.FromCallingAssembly();
      scanner.BindWithDefaultConventions();
     }
  );
}
</pre><p>What it does? It has an abstraction called &#8220;scanner&#8221;. You instruct scanner what to do. In this example, I said - take calling assembly and bind all interfaces to implementation class having Default conventions. The default conventions are ones that I shown above. <br />
</p><p>That&#8217;s it, all those lines of code are simply gone away, since we rely on conventions and Ninject is aware how to deal with those conventions. If you added new dependency and followed convention, nothing you should do manually any more.<br />
</p><h2>I have some questions!?</h2><p>Ok, typically you have something little more complex. I&#8217;ll try to predict some questions you might have.<br />
</p><h3>I have a lot of assemblies in my application, but want only particular ones to be scanned?</h3><p>You can easily use only assemblies that matches particular patterns, like:<br />
</p><pre class="brush: csharp">private static void RegisterServices(IKernel kernel)
{
 kernel.Scan(scanner =&gt;
     {
      scanner.FromAssembliesMatching("Candidate.*");
      scanner.BindWithDefaultConventions();
     }
  );
}
</pre><h3>Is it only default conventions I can use?</h3><p>No, you can specify your own rules. Scanner has <code>BindWith</code> method, that receives <code>IBindingGenerator</code> type. You can implement your own binding generator for custom conventions.<br />
</p><pre class="brush: csharp">private static void RegisterServices(IKernel kernel)
{
 kernel.Scan(scanner =&gt;
     {
      scanner.FromAssembliesMatching("Candidate.*");
      scanner.BindWith&lt;MyCustomConventionsGenerator&gt;();
     }
  );
}
</pre><h3>What if I have several cases of convention violations?</h3><p>You are still able to bind in exactly same way as before:<br />
</p><pre class="brush: csharp">private static void RegisterServices(IKernel kernel)
{
 kernel.Scan(scanner =&gt;
     {
      scanner.FromAssembliesMatching("Candidate.*");
      scanner.BindWith&lt;MyCustomConventionsGenerator&gt;();
     }
  );

    // classes that violates conventions
    kernel.Bind&lt;IMyInterface&gt;().To&lt;MyImpl&gt;();
}
</pre><h3>What is I have dependencies in different assemblies?</h3><p>Best thing is to go with Ninject modules. First, correct the scanner:<br />
</p><pre class="brush: csharp">private static void RegisterServices(IKernel kernel)
{
 kernel.Scan(scanner =&gt;
     {
      scanner.FromAssembliesMatching("Candidate.*");
                        scanner.AutoLoadModules();
      scanner.BindWith&lt;MyCustomConventionsGenerator&gt;();
     }
  );
}
</pre><p>Now, each assembly should include module instance:<br />
</p><pre class="brush: csharp">namespace Candidate.Core
{
    public class CoreModule : NinjectModule
    {
        public override void Load()
        {
            // place convention-violation classes here
   // Bind&amp;lt;IMyInterface&amp;gt;().To&amp;lt;MyImpl&amp;gt;();
        }
    }
}
</pre><p>Another one good feature of Convention based IoC is - &#8220;Config and forget&#8221;. Once done, use always and forget about manual binding once and for all.<br />
</p><p>I&#8217;ve heard about this on <a href="http://www.beletsky.net/2011/12/xp-days-ukraine-2011.html">XP Days 2011</a> conference, by <a href="https://twitter.com/#!/ploeh">Mark Seemann</a>. I think it&#8217;s nice approach.. I adopt it and going to use in my projects.<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2012/01/pre-announce-of-release-candidate.html">
    
      Pre-announce of Release Candidate</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2012-01-13T10:01:00+02:00" pubdate data-updated="true">Jan 13<span>th</span>, 2012</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/candidate/'>Candidate</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>For those, who already forgot what the candidate is I&#8217;ll do a small reminder :). This is an <a href="https://github.com/alexanderbeletsky/candidate">application</a> for Continues Deployment for .NET projects. I started the project at <a href="http://www.beletsky.net/2011/06/candidatenet-application-i-made-on.html">Hackatone</a> that took place in summer 2011, in Kyiv. I liked the results I got there, so I didn&#8217;t throw it away after the contest, but slowly progressed on that through last several months. <br />
</p><a href="https://lh6.googleusercontent.com/-LDlYwfKzvKQ/Tw_ji4BzopI/AAAAAAAAH3A/-SwXb_g_oYo/s621/image-1.png"><br />
<img src="https://lh6.googleusercontent.com/-LDlYwfKzvKQ/Tw_ji4BzopI/AAAAAAAAH3A/-SwXb_g_oYo/s621/image-1.png" alt="welcome"/><br />
</a><br />
<p>The goal of application is very simple. Provide you with easy to setup and use tool Continues Deployment. I&#8217;m still very confused now with all those terms - Continuous Deployment/Delivery/Production/Release.. but in general it is nothing more as next step of Continues Integration. Rebuild and retest the application and deploy it in case of successful results.<br />
</p><a href="https://lh4.googleusercontent.com/-FfsyUPLA5ek/Tw_jirfuETI/AAAAAAAAH24/PX-apdvN2Rw/s1024/image-2.png"><br />
<img src="https://lh4.googleusercontent.com/-FfsyUPLA5ek/Tw_jirfuETI/AAAAAAAAH24/PX-apdvN2Rw/s1024/image-2.png" style="width: 620px" alt="welcome"/><br />
</a><br />
<p>I&#8217;m building that in mind of my own needs, how I see it might work for my projects. My own projects are really simple ones, so the candidate is really simple now. Of cause, I would like to be as general as possible, to cover common needs. I&#8217;m pretty much sure it would be rewritten hundred of times to reach the level of mass adoption and I&#8217;m looking forward to that.<br />
</p><a href="https://lh3.googleusercontent.com/-1pTIk_M6Z0s/Tw_jilnpwhI/AAAAAAAAH28/Zog53hBf1kY/s1019/image-3.png"><br />
<img src="https://lh3.googleusercontent.com/-1pTIk_M6Z0s/Tw_jilnpwhI/AAAAAAAAH28/Zog53hBf1kY/s1019/image-3.png" style="width: 620px" alt="config"/><br />
</a><br />
<p>Yesterday, I reached very important milestone of candidate.net. It is now feature completed. I would like to stop on current functionality and show it to you. It would take some time to prepare website and instructions, but please stay tuned for official release of project!<br />
</p><a href="https://lh6.googleusercontent.com/-2QDjpa8ic7c/Tw_jie0ltoI/AAAAAAAAH20/k6g2qmCxGj0/s982/image-4.png"><br />
<img src="https://lh6.googleusercontent.com/-2QDjpa8ic7c/Tw_jie0ltoI/AAAAAAAAH20/k6g2qmCxGj0/s982/image-4.png" style="width: 620px" alt="config"/><br />
</a><br />
<p>By the way, I&#8217;m still looking for new name! It turns out that finding the good name, could be even harder than finding process running <a href="http://stackoverflow.com/questions/7666423/iis-7-5-with-process-idenity-set-to-user-has-wrong-userprofile">bugs</a>. I would be really happy if you do such early contribution proposing some nice name. Please do not hesitate and share your ideas just in comments.<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2012/01/using-aspnet-mvc-validation-mechanism.html">
    
      Using ASP.NET MVC Validation Mechanism without ASP.NET MVC</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2012-01-10T21:30:00+02:00" pubdate data-updated="true">Jan 10<span>th</span>, 2012</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>I get used to <code>DataAnnotations</code> for model validation very quickly. Indeed, it is great approach. You attribute you model with corresponding attributes, rest is done by framework. It is only <code>ModelState.IsValid</code>, all you have to do before starting working with model.<br />
</p><p>During implementation of some feature for <a href="https://github.com/alexanderbeletsky/candidate">candidate</a> I thought to myself, that I need need exactly same validation for my model class, but out of MVC framework. Namely, for some model class, like <a href="https://github.com/alexanderbeletsky/candidate/blob/master/Candidate.Core/Configurations/Parts/Github.cs">Github.cs</a> I just want to know, is it &#8220;configured&#8221; or not. And configured == valid in my context. Instead of writing custom code with checking all required properties to have some values I wished to do the same as ASP.NET MVC does, through DataAnnotations. It turned out to be possible and really easy.<br />
</p><h2>Basic start</h2><p>Assume you have such model:<br />
</p><pre class="brush: csharp">public class SimpleModel
{
 [Required]
 public string SomeProperty { get; set; }
 
 [Range(0,50)]
 public int SomeAnotherProperty { get; set; }
}
    </pre><p>If your goal is just to get answer &#8220;yes or no&#8221;, you can create such function:<br />
</p><pre class="brush: csharp">public bool ValidateSimpleModel(SimpleModel validate)
{
 return Validator.TryValidateObject(validate, new ValidationContext(validate, null, null), null);
}
    </pre><p><a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validator.aspx">Validator</a> is a static class in DataAnnotations namespace. It takes target object, validation context and validation results collection. But due, to it just &#8220;tries&#8221; to perform validation, most of all parameters could be null.<br />
</p><h2>Use validation results</h2><p>If you need more specific information, like which field is exactly invalid you need to have <code>ICollection&lt;ValidationResult&gt;</code><br />
</p><pre class="brush: csharp">public ICollection&lt;ValidationResult&gt; ValidateSimpleModel(SimpleModel validate)
{
 var validationResults = new List&lt;ValidationResult&gt;();
 Validator.TryValidateObject(validate, new ValidationContext(validate, null, null), validationResults);
 
 return validationResults;
}
    </pre><p>In case of invalid object it would return non-empy collection of <a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationresult.aspx">ValidationResult</a>, that would contain all relevant information.<br />
</p><h2>Wrapping up to extension method</h2><p>Finally, you can create simple extension extension method and apply DataAnnotations validation to any kind of object:<br />
</p><pre class="brush: csharp">public static class ValidatorExtensions
{
    public static bool TryValidateObject(this object validate)
    {
        return Validator.TryValidateObject(validate, new ValidationContext(validate, null, null), null);
    }
}
    </pre><p>So, the model could just have IsValid() method, like:<br />
</p><pre class="brush: csharp">public bool IsValid()
{
 return this.TryValidateObject();
}
    </pre><p>It works great for such simple task I need to accomplish.<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2012/01/approval-tests-locking-down-output.html">
    
      Approval Tests: Locking down an output</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2012-01-06T17:52:00+02:00" pubdate data-updated="true">Jan 6<span>th</span>, 2012</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/approvals/'>Approvals</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>        We have <a href="http://www.beletsky.net/2011/12/approval-tests-locking-down-legacy-code.html">seen</a> how Approval Tests are useful for locking down some legacy code. You might say, that on practice we are having much more bigger problem, like some code that executes queries against the database. We need somehow to be able to work with that code, without worries of brake it down. Approvals could help here. <br />
    </p>    <h2>The case</h2>    <p>        Again I just imagine some legacy code that works with DB, it might look something like that:<br />
    </p>    <pre class="brush: csharp">public class ClassThatOutputsSomething
{
 private static Connection _connection;

 public void MethodThatProduceSomeResults(string parameterOne, int parameterTwo)
 {
  if (!IsConnectionOpened())
  {
   OpenConnection();
  }

  var connection = GetConnection();

  var value = HugeAndScarryLegacyCode.TheUgliesMethodYouMightEverSeen(parameterOne, parameterTwo, 'c');

  var query = string.Format(&quot;INSERT INTO TableName (SomeColumn) VALUES ({0})&quot;, value);
  connection.ExecuteQuery(query);
 }

    // ...
    </pre>    <p>        The <code>MethodThatProduceSomeResults</code> takes some arguments, call another method to get value and then store value to database. It will be problematic to tests what exactly is happening there. We might consider approach to check the difference in <code>TableName</code> before code execution and after, but we will go smarter and easier way. <br />
    </p>    <p>        Let&#8217;s prepare the test for that code.<br />
    </p>    <h2>Tests</h2>    <p>        The great thing with Approvals is the tests are really elegant. Just 2 steps - DO and VERIFY.<br />
    </p>    <pre class="brush: csharp">[Test]
public void should_be_able_to_test()
{
 // DO
 var some = new ClassThatOutputsSomething();
 some.MethodThatProduceSomeResults('some_input', 221);

 // VERIFY
 Approvals.Approve(...);
}
    </pre>    <p>        But you can see, the problem here is that we don&#8217;t have any return value of that method. Instead, it does something inside and keep that action in secret. We need some how to log all internal activities and than verify that log. <code>Approval.Utilities</code> contains exactly what we need.<br />
    </p>    <pre class="brush: csharp">[Test]
public void should_be_able_to_test()
{
 // DO
 var output = ApprovalUtilities.SimpleLogger.Logger.LogToStringBuilder();
 new ClassThatOutputsSomething().MethodThatProduceSomeResults('some_input', 221);

 // VERIFY
 Approvals.Approve(output);
}
    </pre>    <p>        I have just added logger <code>ApprovalUtilities.SimpleLogger.Logger.LogToStringBuilder</code> and do approve against it. But if I run this test I could see that output is just empty. Sure, we need to change <code>MethodThatProduceSomeResults</code> a little.<br />
    </p>    <pre class="brush: csharp">public class ClassThatOutputsSomething
{
 private static Connection _connection;

 public void MethodThatProduceSomeResults(string parameterOne, int parameterTwo)
 {
        // ...

        connection.ExecuteQuery(query);
        ApprovalUtilities.SimpleLogger.Logger.Event(query);
 }
    </pre>    <p>        So, in the place where query is being executed, we placed the logger and put exact some query inside it. Now if I run the test I will got application output, that I will approve and use those approved results after. <br />
    </p>    <p>        I&#8217;m not limited with only one place I could put logger. On practice, would more that one places to grab the results, as well as more that one argument for <code>MethodThatProduceSomeResults</code> method. By analysis of particular practical case, it is possible to place logger exactly where it&#8217;s needed, plus prepare best matching inputs. Just for example: after code examination it might happen that <code>parameterOne</code> is ProductId, but <code>parameterTwo</code> is ProductPrice. In my test I could query the database to select all products and prices and call <code>MethodThatProduceSomeResults</code> in loop, to get all potential output. That approved test will give me much confidence during refactoring.<br />
    </p>    <h2>Conclusion</h2>    <p>        Locking down output is very powerful technique, you can use it for any kind of objects that are &#8220;hidden&#8221; inside legacy classes, like SQL or console outputs.  <br />
    </p>    <p>        On <a href="http://herdingcode.com/?p=329">Herding Code</a> episode <a href="https://twitter.com/#!/LlewellynFalco">Llewellyn</a> describes the case of some legacy project he worked on. There was a kind of report generator and it&#8217;s code was just a big mess. He did copy of production database and put it in &#8220;Read-Only&#8221; mode. By running the report, he was able to find all places where code was accessing DB, since exception is thrown in that place. Putting in just the same log instructions as I did above, he managed to grab all SQL queries that run for that particular report. Everything were just in one file.<br />
    </p>    <p>        That&#8217;s the good example of reaching 100% code coverage just with one test.<br />
    </p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/12/retrospective-2011.html">
    
      Retrospective 2011</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-12-29T21:37:00+02:00" pubdate data-updated="true">Dec 29<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/retrospective/'>Retrospective</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>Last year I failed to create retrospective blog post, so lesson learned and I started a little bit earlier now. Not the 1 day, but 3 days before NY :). Retrospective is a great practice and I hope it give me some value when I&#8217;ll be reading it next year and laughing on my previous achievements.<br />
</p><p>I&#8217;ll try to cover 4 basic directions: Career, Development, Blog, Personal.<br />
</p><h2>Career</h2><p>I continue to do my job for <a href="http://e-conomic.com">e-conomic.com</a>. As I said <a href="http://www.beletsky.net/2011/03/my-first-year-in-company.html">here</a> e-conomic is the most important thing that happened to me in 2010 and keeps it influence on 2011. I&#8217;m still a product developer there, but in general situation has been changing radically. First of all, we are now much more bigger team. Both Ukranian and Denmark parts of team are growing and new cool guys join us. Second, we finished up few projects at the beginning of the year and joined very cool adventure that I a little described <a href="http://www.beletsky.net/2011/12/why-new-technologies-move-your-product.html">here</a>. Sure, I have fun and boring, easy and tough, nice and bad days there. But overall impression is still very good. As soon as we&#8217;ll keep same as we are doing, with same level of passion and team atmosphere - we are on right track.  <br />
</p><p>Besides the e-conomic, there is something else that happened to me this year and had direct impact on career - <a href="http://kievalt.net">Kiev ALT.NET</a>. Unfortunately, I did not blog to much about that community just a some <a href="http://www.beletsky.net/2011/12/kiev-altnet-community-thoughts.html">mention</a> here. Community is very important to any developer and I&#8217;m really happy I found the one. I haven&#8217;t noticed how I became a speaker, actually. With a few nervous tries on Kiev ALT.NET I&#8217;ve managed to give up to 8 (or so) public speeches this year. It might not be so much, but great achievement for me. The speaking opened new opportunities, especially in meeting new people. But first of all it is a great joy and motivation to learn new things.<br />
</p><p>With a great atmosphere and enthusiastic people inside <a href="http://kievalt.net">Kiev ALT.NET</a> I&#8217;ve launched another project called <a href="http://kyivbeerncode.org">Kiev Beer && Code</a>. The idea is taken from <a href="http://seattle.beerandcode.org/">Seattle Beer && Code</a> community, but it is nothing more as developers gathering for social coding. The community is very young and to be honest I don&#8217;t put to much efforts on it&#8217;s promotion, but it a very beginning. I&#8217;m very happy with out current Beer && Code team and will be much more happier if new guys are joining.  <br />
</p><p>I became <a href="http://java.dzone.com/users/alexanderb">MVB</a> (Most Valuable Blogger) for DZone, that I&#8217;m really proud for. It is 2-way value, DZone is using my content.. To me it gives additional traffic. I hope we are still partners for long years.<br />
</p><p>At the end of the year I tried myself in completely new area - trainings. Thanks to <a href="http://xpinjection.com/">XP Injection</a> training center in Kiev, I&#8217;ve been invited to 2 days training session &#8220;TDD in .NET&#8221;. It <a href="http://www.beletsky.net/2011/12/xp-days-ukraine-2011.html">appeared</a> so much successful that chief trainer offered me a place in their trainers group. At December 22, I officially <a href="http://xpinjection.com/2011/12/22/beletsky-joined-our-coaches-group/">joined</a> XP Injection. I&#8217;m very excited about that and hope I can do my best there. So far, we&#8217;ve planned some further TDD .NET trainings, but definitely TDD won&#8217;t be the only one topic I can work in.<br />
</p><h2>Development</h2><p>I mean, everything that I work on my own: pet projects, self education etc. I don&#8217;t remember who said that, but I very agree with this statement - &#8220;if you don&#8217;t write code at home, you are not progressing&#8221;. You have not time to learn at work. Work is the place to perform. You have to have sharp axe, if you came to chop the wood.<br />
</p><p>My main sharp axe exercise is coding. I try to code as much as I can. For productive coding you have to have some projects. Doesn&#8217;t matter what exactly, what&#8217;s important is: you like the idea, you have corresponding technological stack. Technological stack have to correspond the area you want to improve in. My main area&#8217;s are still: C#, HTML/CSS and JavaScript.<br />
</p><p>I was reading <a href="http://pragprog.com/book/tpp/the-pragmatic-programmer">Pragmatic Programmer</a> this year, with a great advice: &#8220;Learn new programming language each year&#8221;. I formulated Pragmatic Product Developer advice, just for my self: &#8220;Release new product each year&#8221;. Even if you release something at work, release something on your own is completely different feeling. It takes too much effort, it&#8217;s painful.. But shipment is like drug, you feel very happy as soon you ship.. You fill very bad as you don&#8217;t ship for a while.<br />
</p><p>While ago I write small article there I <a href="http://www.beletsky.net/2011/09/what-im-going-to-do.html">mentioned</a> what&#8217;s my targets and what I working on. Let&#8217;s quickly go through it:<br />
</p><ul><li><br />
<strong>trackyt.net</strong> as I released that late 2010 I did provide a support up the the May of 2011. A lot of new features has been <a href="https://github.com/alexanderbeletsky/trackyt.net">commited</a> there, but still I slowed down the progress much. It has very low traffic, almost 0 active users. I was about to release version 2.0, absolutely different with all good things that I see in GTD. But I have to admit, I failed that. <br />
</li>
<li><br />
<strong>elmah.mvc.controller</strong> <a href="http://www.beletsky.net/2011/03/integrating-elmah-to-aspnet-mvc-in.html">started</a> out as very simple <a href="https://github.com/alexanderbeletsky/elmah.mvc.controller">helper</a> for ASP.NET MVC applications that want to use ELMAH, but with a great surprise to me it appeared so popular, that finally wrapped up in a micro product. Now, it has ~2,000 downloads on <a href="http://nuget.org/packages/Elmah.MVC">NuGet</a>, I&#8217;ve received several pull requests and had a talk about it on Kiev ALT.NET. Even if is so small, I treat that as success. <br />
</li>
<li><br />
<strong>github.commits.widget</strong> also a micro <a href="https://github.com/alexanderbeletsky/github.commits.widget">product</a> that gathered some attention. That was my attempt of working with github API in javascript and I spend maybe 3 hours to create that code, but I know several sites that using that widget. I had joy of creating that and happy that some people find it useful. <br />
</li>
<li><br />
<strong>githubbadges.com</strong> a little <a href="http://githubbadges.com/">application</a> that I wrote to participate <a href="http://10k.aneventapart.com/Entry/Details/512">10K competition</a>. Total application zipped content should not exceed 10K. I&#8217;ve haven&#8217;t won, I haven&#8217;t got any mentions.. But again it was fun small project. I used some my knowledge of github API and tried to do very tiny JS and CSS <a href="https://github.com/alexanderbeletsky/10k">code</a>.<br />
</li>
<li><br />
<strong>candidate.net</strong> is something I started this summer of <a href="http://www.beletsky.net/2011/06/candidatenet-application-i-made-on.html">hackthone</a>. Since then I completely rewrite it, start to use <a href="https://github.com/alexanderbeletsky/bounce">bounce</a> framework inside and had plans to release it October, but failed. I&#8217;m not throwing away this project and going to ship that soon. I have yet-another-huge-refactoring cycle now, but after that I hope that alpha version could be ready middle January.<br />
</li>
</ul><p>So, it looks like &#8220;I did something&#8221;.. but really nothing impressive. I try to be a little more focused, not more than 2 projects in parallel + very clear criteria&#8217;s of success for projects. But in general my criteria&#8217;s are still simple: actually ship it, learn something new, enjoy the ride. <br />
</p><h2>Blog</h2><p>Thanks to google analytics it is very simple to have analysis. Just take a look at those figures: <br />
</p><a href="https://lh4.googleusercontent.com/-vXQaNQ3spSM/Tvy__2LszrI/AAAAAAAAH2Y/D44-yv0Olpw/s1177/blog-stat-1.jpg"><br />
<img src="https://lh4.googleusercontent.com/-vXQaNQ3spSM/Tvy__2LszrI/AAAAAAAAH2Y/D44-yv0Olpw/s1177/blog-stat-1.jpg" alt="stat" style="width: 620px"/><br />
</a><br />
<p>So, I&#8217;ve got 25,341 Unique visitors and 36,560 visits in total. To understand what it means to me, let&#8217;s take a look last year statistics for same period of time.<br />
</p><a href="https://lh4.googleusercontent.com/-51Hc2jcZ2rI/TvzAB6TkZJI/AAAAAAAAH2g/26wjbns9Fww/s1179/blog-stat-2.jpg"><br />
<img src="https://lh4.googleusercontent.com/-51Hc2jcZ2rI/TvzAB6TkZJI/AAAAAAAAH2g/26wjbns9Fww/s1179/blog-stat-2.jpg" alt="stat" style="width: 620px"/><br />
</a><br />
<p>In 2010 I got 3,979 Unique visitors. It basically means I improved traffic ~637%. This is actually huge number, I don&#8217;t expect that next year of cause.. but hope that traffic will be improved more. <br />
</p><p>OK, what was most popular content this year:<br />
</p><ul><li><a href="http://www.beletsky.net/2011/03/integrating-elmah-to-aspnet-mvc-in.html">Integrating ELMAH to ASP.NET MVC in right way</a> where I first time described my approach of putting ELMAH into ASP.NET MVC website</li>
<li><br />
<a href="http://www.beletsky.net/2011/01/implementation-of-rest-service-with.html">Implementation of REST service with ASP.NET MVC</a> that I blogged at the very beginning of the year and described my vision on REST services in ASP.NET MVC. With a current experience I would probably change something where, hope to make next popular post.<br />
</li>
<li><br />
<a href="http://www.beletsky.net/2011/10/inside-aspnet-mvc-idependencyresolver.html">Inside ASP.NET MVC: IDependencyResolver - Service locator in MVC</a> one of mine articles of Inside ASP.NET series. It actually became on top of <a href="http://asp.net">http://asp.net</a> website, I was really happy about it.<br />
</li>
<li><br />
<a href="http://www.beletsky.net/2011/06/how-to-start-using-git-in-svn-based.html">How to start using Git in SVN-based organization</a> where I shared some experience of &#8220;easy-start&#8221; with Git even in SVN based company. It worked so nice to me and my teammates, that almost everyone is using git now.<br />
</li>
<li><br />
<a href="http://www.beletsky.net/2011/03/aspnet-developers-disease.html">ASP.NET developers disease</a> that I wrote under impressions of one of the job interview we did. My main point where was for the guys that stick to much to WebForms and server-side coding. It was a little provocative, but I hope it was useful.<br />
</li>
</ul><h2>Personal<br />
</h2><p>First of all, I got married. I strongly believe it is for good and for long.<br />
</p><p>I did several interesting trips, especially to <a href="http://www.beletsky.net/2011/02/val-gardena-dolomites-trip-2011.html">Val Gardena</a> with my friends at the beginning of the year and <a href="http://www.beletsky.net/2011/11/sayonara-nippon.html">Japan</a>. Unfortunately, I don&#8217;t predict anything like that in 2012, so it will be kept for good memories.<br />
</p><p>I have to admit I lowered my sport activities too much. I almost stopped every morning exercises, kyokushin karate, rollerblading. Doing those very occasionally. This is not good at all and I already feel bad influence of that. So, my next year is to make it more balanced.<br />
</p><p>It was a great year to me. I wish Merry Christmas and Happy New Year to you, dear reader. I&#8217;m really looking forward to create new content you would like, new products you would find useful. Let&#8217;s gather all good things happened this year and take them for next one.<br />
</p><p>See you 2012!<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/12/xp-days-ukraine-2011.html">
    
      XP Days Ukraine 2011</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-12-19T13:05:00+02:00" pubdate data-updated="true">Dec 19<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/conference/'>Conference</a>, <a class='category' href='/blog/categories/mind/'>Mind</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p><small>Photos from conference are made by <a href="https://plus.google.com/104783416826445069921/posts">Andrii Matukhno</a></small><br />
</p><p><a href="http://xpdays.com.ua">XP Days</a> is a 3 days event. First 2 days are dedicated for trainings and meet-ups and the last day was for speeches. This time I had 3 roles actually: trainer, speaker and visitor. And that was extremely cool.<br />
</p><h2>.NET TDD class</h2><p>I&#8217;ve never done any trainer job before, so I was little worried of how it goes. With respect to XP practices we decided to do it in pair with <a href="https://twitter.com/skalinets">Sergey Kalinets</a>. <br />
</p><p>Our group consisted of 12 students. After initial introduction I realized - wow, we&#8217;ve got a pretty strong guys here.. Most of group had some real TDD practice before and came to improve the skill and found out new techniques. We had a program for 2 days, which covers the theoretical intros to TDD and practical tips and tricks.<br />
</p><p>We used <a href="http://osherove.com/tdd-kata-1/">String Calculator</a> kata which we used both days to warn up. This is very productive way of learning and improving and all guys in group absolutely loved that. I hope this kata became every morning exercise and would be shared among colleagues and be done together, which is great fun.<br />
</p><p>We had great tandem, together with Sergey. We know each other from <a href="http://kievalt.net/">Kiev ALT.NET</a> community, but never worked closely. I was very surprised how similar initial experience of TDD we had, so there was absolutely no problem to collaborate. Sergey is very professional trainer, his confidence and experience ruled among these days, he managed to create the training in consistent way. Very naturally we divided technologies & tools, since Sergey works mostly with Desktop and WCF and I work with Web. <br />
</p><p>So, it went very fine as for me. Friday evening, when we&#8217;ve closed training I was very happy to receive feedback. I believe everyone liked what we did. If you guys are reading that, I would ask to put small comment to that post (yes, &#8220;+1&#8221; would be alright :)).<br />
</p><h2>Conference</h2><p>There was a lot of interesting talks. Unfortunately I had to miss several quality-proved ones by <a href="https://twitter.com/skalinets">Sergey Kalinets</a> and <a href="https://twitter.com/dimapasko">Dmitriy Pasko</a>, I&#8217;m really sure that was great stuff. I liked several speeches the most: one by <a href="https://twitter.com/ploeh">Mark Seeman</a> about Convetions, that showed me how to write less code relying on conventions.. and lighting talk by <a href="https://twitter.com/dmytromindra">Dmitry Mindra</a> on software craftsmanship. It was so great and inspirational! I was touched with case regarding Dmitry&#8217;s father and his attitude to craft. At the end of speech I was happy to get yellow bracelet in return to my promise to: <br />
</p><ul><li>Love the craft</li>
<li>Study and improve knowledge all the time</li>
<li>Share the knowledge with people around you</li>
</ul><p>I hope I will do that!<br />
</p><a href="https://lh4.googleusercontent.com/-maQ_RI-aSOg/Tu0k9YTFMiI/AAAAAAAAJP0/7rW_X2iyfqg/s620/IMG_9494.JPG"><br />
<img src="https://lh4.googleusercontent.com/-maQ_RI-aSOg/Tu0k9YTFMiI/AAAAAAAAJP0/7rW_X2iyfqg/s620/IMG_9494.JPG" alt="dmitry mindra" /><br />
</a><br />
<p>My speech was dedicated to <a href="http://www.beletsky.net/search/label/Approvals">Approvals</a>. Even I had some lack of time and did not manage to show final example I believe it worked great. The audience were very interactive and I felt the positive energy in the air.<br />
</p><p>I had prepared introduction part and code examples that I did just on stage. In my opinion the best way to show something to developers is to write some code, but unfortunately it took a little more time that I expected. Moreover, I received many questions at the very first example, so I had to calm down people a little saying &#8220;Guys, please wait.. I haven&#8217;t even started to show cool things&#8221; :)..  <br />
</p><a href="https://lh5.googleusercontent.com/-koMyH6IIFT4/Tu00bGOLp1I/AAAAAAAAJfs/u9HTu4G4Vdc/s620/IMG_5458.JPG"><br />
<img src="https://lh5.googleusercontent.com/-koMyH6IIFT4/Tu00bGOLp1I/AAAAAAAAJfs/u9HTu4G4Vdc/s620/IMG_5458.JPG" alt="alexander beletsky" /><br />
</a><br />
<p>One nice feature of this conference was that all participant two small card which they could fill with feedback and give to speaker back. I was amazed people very stepping by, saying thank you and giving those cards to me. It turns out that most of audience not familiar with Approvals, so general comment was &#8220;Man, I would never heard about that, thanks for sharing it&#8221;. <br />
</p><a href="https://lh4.googleusercontent.com/-PW9Vn17dOFk/Tu8KVC0sm3I/AAAAAAAAH2E/GnEavhgaZ78/s620/IMG_8234.JPG"><br />
<img src="https://lh4.googleusercontent.com/-PW9Vn17dOFk/Tu8KVC0sm3I/AAAAAAAAH2E/GnEavhgaZ78/s620/IMG_8234.JPG" alt="good job cards" /> <br />
</a><br />
<p>It was extremely pleasant to receive that feedback thought cards and twitter. I&#8217;m truly appreciate each good word I got from you guys. Totally I collected 22 feedback cards and treat it as very good result!<br />
</p><h2>Conclusions</h2><p>First of all, big kudos for all people who make this event happen: <a href="http://xpinjection.com/">XP Injection</a>, <a href="http://xpdays.com.ua/sponsors/">sponsors</a>, <a href="http://xpdays.com.ua/speakers/">speakers</a> and visitors. Conference took place in business center <a href="http://www.parus.biz/">Parus</a>, which was a great idea. It is in a center of the Kyiv and has very suitable infrastructure.<br />
</p><p>As always, it was great pleasure to meet with people from other cities and countries, getting new contacts. I hope that&#8217;s not the last XP Days in Ukraine, not the last I&#8217;m participating in.<br />
</p><p>The slides from my speech is shared on <a href="http://speakerdeck.com/u/alexanderbeletsky/p/approval-testing">SpeakerDeck</a>. Also, I&#8217;m happy to help you with Apporvals, so do not hesitate to contact my skype or twitter.<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/12/approval-tests-locking-down-legacy-code.html">
    
      Approval Tests: Locking Down Legacy Code</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-12-14T19:06:00+02:00" pubdate data-updated="true">Dec 14<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/approvals/'>Approvals</a>, <a class='category' href='/blog/categories/open-source/'>Open source</a>, <a class='category' href='/blog/categories/tdd/'>TDD</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>Suppose, you working on project with a lot of legacy code inside. I know it makes you sick, but as brave developer you want to improve things. You met that ugliest method in your life and only one thing you want to do - refactor it. But refactoring is dangerous procedure. For safe refactoring you need to have good test coverage. But wait, it is legacy code. You simply have no tests. What to do? Approvals have answer.<br />
</p><h2>Legacy code is the code that&#8230;</h2><p>Works! Right, it is ugly, un-supportable, nothing you can easy change there. But the most wonderful feature of that code - it works for years. And first thing is to get advantage of that fact!<br />
</p><p>Here is my &#8220;just for example&#8221; legacy method.<br />
</p><pre class="brush: csharp">namespace Playground.Legacy
{
    public class HugeAndScarryLegacyCode
    {
        public static string TheUgliesMethodYouMightEverSeen(string s, int i, char c)
        {
            if (s.Length > 5)
            {
                s += "_some_suffix";
            }

            var r = new StringBuilder();
            foreach (var k in s)
            {
                if ((int)k % i == 0)
                {
                    r.Append(c);
                }
                else
                {
                    if (k == c)
                    {
                        if (r.Length <= 2)
                        {
                            r.Append('a');
                        }
                        else
                        {
                            r.Append('b');
                        }
                    }
                    if (k == '^')
                    {
                        r.Append('c');
                    }
                    else
                    {
                        r.Append(k);
                    }
                }
            }

            return r.ToString();
        }
    }
}
</pre>
<p>(it&#8217;s it ugly enough?)
</p><p>It has a cycles, nested if-else case and all nice features of legacy code. We need to change it, but in the same time guarantee it would not be broken.
</p><h2>Trying first simple test</h2><p>Supposing also, I&#8217;m not much in details of how exactly this function works.. So, I&#8217;m creating the test like:
</p><pre class="brush: csharp">[Test]
public void shoudl_work_some_how()
{
    Approvals.Approve(HugeAndScarryLegacyCode.TheUgliesMethodYouMightEverSeen("someinput", 10, 'c'));
}
</pre><p>I run it and got some result to approve:
</p><a href="https://lh6.googleusercontent.com/-7-utFOmYWqw/TujWEUiQc-I/AAAAAAAAH1g/-1OCWEOAQYQ/s555/result-1.jpg">
<img src="https://lh6.googleusercontent.com/-7-utFOmYWqw/TujWEUiQc-I/AAAAAAAAH1g/-1OCWEOAQYQ/s555/result-1.jpg" alt="approvals" />
</a>
<p>I approve that, cause I know that function works. But something inside tells you - that is not enough. Try to run in under the coverage: 
</p><a href="https://lh5.googleusercontent.com/-9AS23mH6UGI/TujWMRdftFI/AAAAAAAAH1o/VDbIJW4D3OQ/s621/result-2.jpg">
<img src="https://lh5.googleusercontent.com/-9AS23mH6UGI/TujWMRdftFI/AAAAAAAAH1o/VDbIJW4D3OQ/s621/result-2.jpg" alt="approvals" />
</a>
<p>That does not make me real confident with tests only one hit and coverage 76%. We have to create better tests cases.
</p><h2>Use combinations of arguments</h2><p>Approvals include some tools to deal this case. Let&#8217;s change out test and write something like,
</p><pre class="brush: csharp">[Test]
public void should_try_to_cover_it()
{
    var numbers = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    var chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".ToCharArray();
    var strings = new[] { "", "approvals", "xpdays", "^stangeword^" };

    ApprovalTests.Combinations.Approvals.ApproveAllCombinations(
        (s, i, c) => HugeAndScarryLegacyCode.TheUgliesMethodYouMightEverSeen(s, i, c),
        strings,
        numbers,
        chars);
}
</pre><p>With only few lines of code, I&#8217;ve got 1560 test cases and all of them are correct!
</p><a href="https://lh3.googleusercontent.com/--P4qoqgHK-A/TujWW2-jkkI/AAAAAAAAH1w/nfOWsaKJH5Y/s575/result-3.jpg">
<img src="https://lh3.googleusercontent.com/--P4qoqgHK-A/TujWW2-jkkI/AAAAAAAAH1w/nfOWsaKJH5Y/s575/result-3.jpg" alt="approvals" />
</a>
<p>Besides, I got pretty good coverage. Ideal, I would say. Now, if even one small change would happen, some of 1560 tests will notice that. </p><a href="https://lh3.googleusercontent.com/-P7b61iiuL7I/TujWflnUWUI/AAAAAAAAH14/ERoxa0k6dfI/s620/result-4.jpg">
<img src="https://lh3.googleusercontent.com/-P7b61iiuL7I/TujWflnUWUI/AAAAAAAAH14/ERoxa0k6dfI/s620/result-4.jpg" alt="approvals" />
</a>
<h2>Locking down</h2><p>The process of controlling the legacy code in that way is called &#8220;Locking down&#8221;. After the code is locked down, you have high confidence (read low risk) of breaking changes you introduce. Please note how low effort it was to create all that 1560 tests and how much value gained in that.
</p><p>Notice, that test like <code>should_try_to_cover_it</code> is not supposed to &#8220;live forever&#8221;. You probably even don&#8217;t need to check it in to source control. You just do your job, either refactoring or changing that functionality and use Approvals to notify you as fast as possible of something goes wrong.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/12/why-new-technologies-move-your-product.html">
    
      Why New Technologies Move Your Product Faster?</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-12-13T10:15:00+02:00" pubdate data-updated="true">Dec 13<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/mvc/'>MVC</a>, <a class='category' href='/blog/categories/mind/'>Mind</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>This summer my company <a href="http://www.e-conomic.co.uk/">e-conomic</a> started new project with a working title SBA (Small Business Accounting). The project is about the creation of the product for small business owner, like consultants,  web shops, freelancers etc. Since my company already had great expertise in that area the product vision and initial backlog of stories was already in place. Even more, we already had a product that does nearly the same but for a different target user - so, it was kind of natural to try to build SBA based on existing one. We started our journey having very ambitious plan in our mind meaning release in less than 6 month.<br />
</p><p>But to our great disappointment the progress for next 2 month appeared very low. We underestimated one thing - the existing product is a great  but some of the underlying technologies were ill-suited for the new projects. Very simple things, like adding new custom form, UI changes, data access etc. were hard and unpleasant.<br />
</p><p>The legacy code, de-motivation and low progress.. were about to bury the project. Fortunately, the company were brave enough to change something on a fly. We went a very risky way, to build new product not based on old technologies, but almost from scratch. And as for me, that was great decision! So, somewhere in October we re-started the project.<br />
</p><p>What have we changed and how it went?<br />
</p><h2>SVN => Git</h2><p>I have <a href="http://www.beletsky.net/2011/06/how-to-start-using-git-in-svn-based.html">posted earlier</a> some my experience of starting to use Git in SVN-based organization. That time it was 2-3 people that tried to adopt that process, now it is only 2-3 who are not using it. We are thinking about moving to pure Git environment, but our deployment procedure slightly depends on SVN. As soon as we fix it, we can get rid of SVN completely.<br />
</p><p>You might argue, that changing source management tool is not exactly technological change and not affecting development velocity! But wait a minute.. How much time did you waste to resolve stupid tree conflicts? How much time you waste waiting for new branch, at the code freeze period? How many times your thrown away yours refactoring results, simply because you are not able to commit that now? <br />
</p><p>All of that factors are contra-productive. It could be not even seen from first sight, but Git improves the velocity simply by getting rid of annoying things that are natural to centralized source control management systems.<br />
</p><a href="https://lh5.googleusercontent.com/-XG2gEof9UpY/TucIbWZAFWI/AAAAAAAAH1A/1CWmMN_-chQ/s620/git.jpg"><br />
<img src="https://lh5.googleusercontent.com/-XG2gEof9UpY/TucIbWZAFWI/AAAAAAAAH1A/1CWmMN_-chQ/s620/git.jpg" alt="git" /><br />
</a><br />
<h2>ASP.NET WebForms => ASP.NET MVC</h2><p>Supporting WebForm&#8217;s code is a big mess. It&#8217;s is difficult to test, difficult to understand and to change. We had a bunch of custom controls that worked fine, but adopting them to something different is hard.<br />
</p><p>For the year I&#8217;m <a href="http://www.beletsky.net/search/label/MVC">studding</a> ASP.NET MVC and much inspired by it&#8217;s clear and powerful design. So, I was really happy we finally <a href="http://www.beletsky.net/2011/10/integrating-aspnet-mvc-into-legacy-web.html">moved</a> that direction. <br />
</p><p>We are using MVC in both modes: as for our web UI pages and for REST services. The same URL could produce both HTML or JSON response, depending on context. Having that, we are much flexible and not duplicate the code on pages and web services. MVC controllers are easy testable, Views are clean having only HTML with only few server side code snippets. Switch to ASP.NET MVC boosts us pretty much.<br />
</p><p>I think the adaption of new technology was really fast, even if we had some issues at the beginning they have been solved. I have to say that to use ASP.NET MVC we have to update production environment, namely upgrade in Windows 2008 with II7 which requires additional investment. But I think it&#8217;s only for good, cause having environment debt is the same as having technical debt in code.<br />
</p><a href="https://lh6.googleusercontent.com/-3FyOP31U69I/TucImLlSZvI/AAAAAAAAH1I/lWulB9EVFeo/s620/mvc.jpg"><br />
<img src="https://lh6.googleusercontent.com/-3FyOP31U69I/TucImLlSZvI/AAAAAAAAH1I/lWulB9EVFeo/s620/mvc.jpg" alt="asp.net mvc" /><br />
</a><br />
<h2>Pure jQuery => Backbone.js</h2><p>jQuery is the best javascript framework ever. It suites so nicely till the application is not getting to much big. As you getting out some imaginary &#8220;bounds&#8221; jQuery code get out of the control. Till that time we already had huge amount of .js files mixing out logic and UI stuff. <br />
</p><p>We were choosing between Knockout.js and Backbone.js and finally stopped at Backbone. Backbone.js introduce order in client-side code. It has clear separation of concerns for Models, Views, Controllers.. so we can say Backbone.js is MVC framework on client.<br />
</p><p>Having order is first step for productivity. The things are more predicable, read more fast to getting things done. Of cause, it takes a lot of effort to learn it. And no surprise some we still having some challenges caused by lack of expertise. But having <a href="http://lostechies.com/derickbailey/">Derick Bailey</a> as our consultant making it better. <br />
</p><p>I would add that ASP.NET MVC and Backbone.js suits each other very nicely, since Backbone.js is REST oriented and ASP.NET MVC exposing REST in a right way.<br />
</p><a href="https://lh6.googleusercontent.com/-Ww_ElYoIAVo/TucIx1wP6tI/AAAAAAAAH1Q/jmKpUE2jjQY/s620/backbone.jpg"><br />
<img src="https://lh6.googleusercontent.com/-Ww_ElYoIAVo/TucIx1wP6tI/AAAAAAAAH1Q/jmKpUE2jjQY/s620/backbone.jpg" alt="backbone.js" /><br />
</a><br />
<h2>Super.Tricky.NHibernate.Wrapper => ADO.NET</h2><p>One of the pain-in-neck points of our application is data access. We have huge wrapper around the NHibernate framework. Words &#8220;Wrapper on NHibernate&#8221; could make someone sick, what if I say, &#8220;Wrapper on HHibernate, which is code generated&#8221;? <br />
</p><p>So, someone might treat that are making step back. But I don&#8217;t agree. Whatever things you can do in C# code, it is SQL only the language your Database can speak. Having a ORM&#8217;s are kind of having translator during the conversation with foreign guy. It works great as soon you speak simply, it&#8217;s getting worse than conversation going complicated, so translator hardly could translate everything you want to say. And of cause, it almost has no sense to have a translator, as soon if you can speak that language.<br />
</p><p>We are not using pure ADO.NET, it would be complicated. We have a tiny wrapper on that that basically run queries and returns result sets. It might seem harder, but I would say it&#8217;s very flexible. You can create what ever queries you need and map them what ever models you have. It works fine, it works fast. It is easy to test, since you no longer need NHibernate profiler to understand what&#8217;s wrong in you application, code just close to you.<br />
</p><p>After last <a href="http://kievalt.net/">Kiev ALT.NET</a> meeting I understood we are not alone here. A lot of people start to understand that NHibernate becoming to heavyweight. New movement of MicroORM&#8217;s appeared, that combines power of SQL and functionality of mapping tables to objects. I want to believe that some MicroORM framework could be our next thing to adopt. <br />
</p><a href="https://lh5.googleusercontent.com/-8g_ydfqm6NU/TucI50rybVI/AAAAAAAAH1Y/PzhnR_Eudzo/s623/sql.jpg"><br />
<img src="https://lh5.googleusercontent.com/-8g_ydfqm6NU/TucI50rybVI/AAAAAAAAH1Y/PzhnR_Eudzo/s623/sql.jpg" alt="sql" /><br />
</a><br />
<h2>De-motivation => Obsession</h2><p>It is not technological factor.. it is not even something I easy describe. Developers are taking responsibility by changing the things or advocating for some particular technology. You are no longer have excuse of bad quality because of legacy reasons. Sure, legacy still plays some role but impact is not so high.<br />
</p><p>Having a new technologies on board simply makes developers happier. Happy developer is obsessed developer, he is commited to success. He will work as much as he can to make good results. <br />
</p><p>With a consistent challenge, every day is no longer &#8220;another day in office&#8221;, but rather &#8220;yet another day on pirate ship&#8221;. It starts to smell start-up shop, that tried to get on market as soon as possible, adapting last available tools. The project now is not something I just had to do, but kind of pet project, where you trying things out and feel great if those things works.<br />
</p><p>That&#8217;s why in particular I think it is great to start from scratch (or near to scratch) one a year or something. Pick up last thing, learn them, adopt and build something valuable - it is nothing to compare with maintenance of 5 year old code.<br />
</p><p>New technologies moves you product faster!<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  <div class="pagination inner pure-u-1">
    
      <a class="prev" href="/blog/page/11/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/9/">Newer &rarr;</a>
    
  </div>
</div></div>
	<footer class="pure-g-r"><div class="inner pure-u-1">
	<p>
		Theme by <a href="https://twitter.com/alexbeletsky">@alexbeletsky</a> | Fonts by <a href="http://www.google.com/fonts/">Google Fonts</a> | Icons by <a href="http://fontello.com/">Fontello</a> | Hosted on <a href="http://github.com">github</a> | Powered by <a href="http://octopress.org/">Octopress</a>
	</p>
	<p>
		Copyright © 2010 - 2013 beletsky.net
	</p>
</div>

</footer>
	<div class="buttons">
	


	
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


	
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


	
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


	

</div>
</body>
</html>

<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Alexander Beletsky's development blog</title>
  <meta name="author" content="Alexander Beletsky">

  
  <meta name="description" content="The Power of Close Collaboration Oct 5th, 2011 BeerNCode, Mind The collaboration and communication is very important in solving problems. As much &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://beletsky.net/blog/page/11/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/fontello.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/pure-min.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Alexander Beletsky's development blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:800' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-16388698-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>


<body>
	<header class="pure-g-r"><div class="pure-g-r">
	<div class="inner pure-u-1">
		<h4 class="light">Alexander Beletsky's development blog</h4>
		<h1><a href="/">My profession is engineering</a></h1>
		<nav role="navigation" class="pure-menu pure-menu-open pure-menu-horizontal light"><ul>
	<li><a href="/projects">Projects</a></li>
	<li><a href="/talks">Talks</a></li>
	<li><a href="/blog/archives">Archive</a></li>
	<li><a href="/about">About me</a></li>
</ul>

</nav>
	</div>
</div>

</header>
	<div class="social inner pure-menu-horizontal"><ul>
	<li><a class="twitter icon-twitter" href="http://twitter.com/alexbeletsky"></a></li>
	<li><a class="github icon-github-circled" href="https://github.com/alexanderbeletsky"></a></li>
	<li><a class="stackoverflow icon-stackoverflow" href="http://stackoverflow.com/users/386751/alexanderb"></a></li>
	<li><a class="rss icon-rss" href="http://feeds.feedburner.com/abeletskyblog"></a></li>
</ul>
</div>
	<div id="content" class="inner pure-g-r"><div class="blog-index">
  
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/10/power-of-close-collaboration.html">
    
      The Power of Close Collaboration</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-10-05T20:06:00+03:00" pubdate data-updated="true">Oct 5<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/beerncode/'>BeerNCode</a>, <a class='category' href='/blog/categories/mind/'>Mind</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>The collaboration and communication is very important in solving problems. As much better collaboration you have as much fast you are able to handle different issue. As closer people to each other, as better they able to work. That&#8217;s why I think that distributed teams even if they consists of great engineers could not work 100% of their potential. Lags in communications, language barrier, loose of body languages etc. makes it 80% for best cases.<br />
</p><p>As you might know I&#8217;m currently working on <a href="https://github.com/alexanderbeletsky/candidate.net">candidate.net</a> project. I really want to release that and according to my original plans I was really close to do that. But, suddenly my application just stopped to work. I&#8217;ll skip details of bug, but it was a ship killer. Application was not able to clone/pull github repositories. The only thing that happened between periods of working and non-working states is that I upgraded my Windows 7 up to SP1.<br />
</p><p>Even if I had great support by <a href="http://twitter.com/#!/ukraitor">@ukraitor</a> who forked my project recently, we were not able to solve it (remember, distributed teams - he is from Odessa, far from me). I was pulling out my hair and mostly lost a hope to solve that. But I decided to share the problem on latest <a href="http://kyivbeerncode.org/">Beer && Code</a> meeting we had this Tuesday.<br />
</p><p>It is usually hard to explain your problem. Along the process, I think to myself - &#8220;those people are pretty far from problem context, could they indeed help me?&#8221;. The simple answer is &#8220;Yes, they can&#8221;. Never underestimate the people around you.<br />
</p><p>During 2 hours we&#8217;ve been able to try different scenarios, discuss some potential issues and finally found a clue! I was so happy about that, at least my work moved from a dead point. I&#8217;m sure, I could not complete it by my own (in reasonable time). <br />
</p><p>So, my point is: if you are in work project - immediately share you problem with colleagues don&#8217;t make yourself <a href="http://www.beletsky.net/2010/11/you-stucked-stop-and-ask-for-help.html">completely stucked</a>. If you work on your own project - it is better if you find a collaborator, if you don&#8217;t have one you might find a local group, like <a href="http://kyivbeerncode.org/">Beer && Code</a> or talk to your developers friends whatever. <br />
</p><p>Remember, as closer the collaborator is as better. Special thank&#8217;s today goes to <a href="http://twitter.com/#!/chaliy">@chaliy</a> who helped to solve the issue.<br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/09/branching-workflow-in-git-svn-mode.html">
    
      Branching Workflow in Git-SVN Mode</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-09-06T17:42:00+03:00" pubdate data-updated="true">Sep 6<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/git/'>Git</a>, <a class='category' href='/blog/categories/gitsvn/'>GitSVN</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>As you might already know branches are primary power of Git. You should create branch for every task you working on. Even if it is something small you easily starting to get a good habit of creating branches, since they keep you much in isolation. So, how to deal with branches in Git-SVN mode? It is really easy and conforms to common git practices. </p><p>So, as you cloned the SVN repo you have master branch (or several masters, if you did more <a href="http://www.beletsky.net/2011/08/analog-of-svn-branch-switch-for-git.html">switches</a>). Suppose you need to start to work on ticket ND-177. </p><ol><li>Create new branch for ND-177 (I call new branch like, original_branch-branch_name)</li>
<pre>git checkout -b master-nd-177   
</pre><li>Do your work here, performing as many commits as you need</li>
<pre>get commit -a -m "some intermediate commit.."
</pre><li>Now, as you are ready to be merged you to SVN, you checkout and rebase master (to get latest SVN changes from it)</li>
<pre>git checkout master
    git svn rebase
</pre><li>You can simply merge 2 branches, but with simple merge you will get all commits history that you probably don&#8217;t need in SVN at all. You squash to compress number of commits into one nice looking commit object</li>
<pre>git merge --squash master-nd-177
</pre><li>It would merge up all changes from master-nd-177 into master. All you need to do is commit</li>
<pre>git commit -m "ND-177 completed"
</pre><li>And dcommit changes to SVN server</li>
<pre>git svn dcommit
</pre></ol><p>That&#8217;s six basic steps makes really straightforward workflow for everyday usage. </p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/09/what-im-going-to-do.html">
    
      What I&#8217;m Going To Do</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-09-01T20:40:00+03:00" pubdate data-updated="true">Sep 1<span>st</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/mind/'>Mind</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>Lazy summer days have gone and cool September came. It is good time to think, decide on projects and goals. No time to chill.  </p><p>I have a different things in my mind, all the time. My biggest problem is loosing focus and task switching. I simply can not do one thing for quite long time. I need something new, I need to satisfy my exploration instinct. In the same time, achievement of results require much focus. I would like to be more focused.    </p><p>I&#8217;ll try to formulate my current projects and expectations I have. That&#8217;s my active projects, sorted by priority: </p><ul><li>         <strong>economic.com</strong> - my job. Working for economic is very important to me since it is main project that gives me money. We are doing interesting things there, problem is our technological stack and frameworks are outdated. That&#8217;s typical stage for every big project and pretty de-motivator for developers (especially me). Working with old stuff is hard and boring, that&#8217;s fact. But we have good team there and hope we are able to solve problems and move to bright future.     </li>
<li>         <strong>candidate.net</strong> - the <a href="http://www.beletsky.net/2011/06/candidatenet-application-i-made-on.html">application</a> I started on <a href="http://www.beletsky.net/2011/06/hackatone-in-kiev-11-12-june.html">Kiev Hackatone</a>. Remember I was describing my <a href="http://www.beletsky.net/2011/05/continuous-production-make-it-work.html">experience</a> with Continues Delivery based on Jenkins? That worked and works for me perfectly, expect the fact that Jenkins is Java application and consumes a lot of recourses (but I have quite limited resources on my VSP, actually). Candidate is the one who going to substitute Jenkins for me. Based on a power of <a href="https://github.com/refractalize/bounce">Bounce</a> and <a href="https://github.com/ferventcoder/roundhouse">Roundhouse</a> I will create nice and easy to use Continues Delivery tool for .NET websites and of cause release it open sourced for everyone. BTW, Candidate is working name and I&#8217;m looking for cool name for it, if you have any ideas let me know.     </li>
<li>         <strong>trackyt.net</strong> - the first <a href="http://www.trackyt.net/">application</a> I build and released on my own. Exactly this project gave me knowledge of &#8220;release&#8221; and how tough and hard it is. I haven&#8217;t write about it and haven&#8217;t done any major release recently. My bad. I&#8217;m not going to close that project. Still they say me &#8220;there are 1.000.000 GTD application around the internet&#8221;, you know - I don&#8217;t care. 10 month passed after version 1.0 released and it is only now I really understand what I want to create. I&#8217;ve been user of trackyt by myself for long time, I&#8217;ve collected priceless feedback of my friends.. I gathered more experience in building that kind of applications. I have clear vision both application and technology stack I&#8217;m going to use. I&#8217;m not happy with current version (and project name), so I&#8217;m simply going to start from scratch. Release 2.0 will be much interesting and useful, at least I hope that much.     </li>
<li>         <strong>beletsky.net</strong> - my blog. Least but not last, since <a href="http://beletsky.net">beletsky.net</a> is my biggest motivator. I will continue my <a href="http://www.beletsky.net/search/label/InsideMVC">Inside ASP.NET MVC</a> as well as all other things I try to put here. Of cause, producing good content is very difficult job.. but you are (readers) could improve it much. Don&#8217;t be lazy to post comments and any other feedback. It is really important for every blogger.     </li>
</ul><p>Besides of that I&#8217;m really happy that this year I joined <a href="http://kievalt.net/">Kiev ALT.NET</a> community. Recently we also started to have <i>Beer-n-code</i> sessions, that is really cool. I&#8217;m going to continue my contribution there as well. </p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/08/elmah-mvc-controller-released-on-nuget.html">
    
      ELMAH MVC controller released on NuGet</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-08-29T21:20:00+03:00" pubdate data-updated="true">Aug 29<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/elmah-dot-mvc/'>ELMAH.MVC</a>, <a class='category' href='/blog/categories/mvc/'>MVC</a>, <a class='category' href='/blog/categories/nuget/'>NuGet</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>        I dedicated some time for that and happy to announce - ELMAH MVC controller released         on NuGet.     </p><p>        Due to the latest interest, feedback and changes - it has no sense         at all to keep that code just in blog post. In my <a href="http://www.beletsky.net/2011/08/latest-version-of-elmah-mvc-controller.html">previous</a> post I promised to create NuGet package for that, so here we are:     </p><div class="commandWrapper">        <div class="commandPrompt">            <p class="command">                PM&gt; Install-Package Elmah.MVC</p></div></div><p>        I simplified code even a little more to avoid changing in routes (in case of Admin area already exists in project).     </p><p>        So just grab it from NuGet now.     </p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/08/latest-version-of-elmah-mvc-controller.html">
    
      Latest version of ELMAH MVC controller</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-08-27T19:36:00+03:00" pubdate data-updated="true">Aug 27<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/elmah-dot-mvc/'>ELMAH.MVC</a>, <a class='category' href='/blog/categories/mvc/'>MVC</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/tools/'>Tools</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p><a href="http://www.beletsky.net/2011/03/integrating-elmah-to-aspnet-mvc-in.html">Integrating ELMAH to ASP.NET MVC in right way</a> is blog post I created sometime ago. It appears really popular, because a lot of people had the same issue as me and found solution I created really applicable. It was really cool to receive all that feedback! By the way, <a href="https://github.com/alexanderbeletsky/elmah.mvc.controller">elmah.mvc.controller</a> is my first github repository I got pull request! </p><p>Especially, I would like to thank to <a href="https://github.com/seba-i">Seba Illingworth</a> and <a href="http://twitter.com/#!/blowdart">Barry Dorrans</a> who found really nasty issues and helped to fix those. </p><p>The controller&#8217;s code has been moved to github long time ago, but what I see many people just copy-past code from article into their solutions. The code I gave in previous post has been changed drastically, but instead of re-writting original post I decided to create new one. </p><h2>Latest version of ELMAH MVC controller</h2><p>So, after all modifications it looks like: </p><pre class="brush: csharp">namespace ElmahMvc.Areas.Admin.Controllers {
    class ElmahResult : ActionResult {
        private string _resouceType;

        public ElmahResult(string resouceType) {
            _resouceType = resouceType;
        }

        public override void ExecuteResult(ControllerContext context) {
            var factory = new Elmah.ErrorLogPageFactory();

            if (!string.IsNullOrEmpty(_resouceType)) {
                var pathInfo = "/" + _resouceType;
                context.HttpContext.RewritePath(FilePath(context), pathInfo, context.HttpContext.Request.QueryString.ToString());
            }

            var currentApplication = (HttpApplication)context.HttpContext.GetService(typeof(HttpApplication));
            var currentContext = currentApplication.Context;

            var httpHandler = factory.GetHandler(currentContext, null, null, null);
            if (httpHandler is IHttpAsyncHandler) {
                var asyncHttpHandler = (IHttpAsyncHandler)httpHandler;
                asyncHttpHandler.BeginProcessRequest(currentContext, (r) => { }, null);
            }
            else {
                httpHandler.ProcessRequest(currentContext);
            }
        }

        private string FilePath(ControllerContext context) {
            return _resouceType != "stylesheet" ? context.HttpContext.Request.Path.Replace(String.Format("/{0}", _resouceType), string.Empty) : context.HttpContext.Request.Path;
        }
    }

    public class ElmahController : Controller {
        public ActionResult Index(string type) {
            return new ElmahResult(type);
        }
    }
}

</pre><h2>How to use it in my application?</h2><p>Easy. Install ELMAH by NuGet, in package console </p><pre class="brush:plain"> Install-Package elmah
</pre><p>It is optional (but preferable) to create new Area called Admin. Inside AreaRegistration.cs your should place routing for ELMAH controller: </p><pre class="brush: csharp">context.MapRoute(
        "Admin_elmah",
        "Admin/elmah/{type}",
        new { action = "Index", controller = "Elmah", type = UrlParameter.Optional }
    );
</pre><p>Create ElmahController.cs (just from code above) and place to yours Areas/Admin/Controller folder, add file to project. Don&#8217;t forget to change the namespace according to your project. </p><p>Configure ELMAH logging options (Memory, XML, SQL), use Web.Config of this <a href="https://github.com/alexanderbeletsky/elmah.mvc.controller">project</a> as example. Run application, and see that: </p><pre class="brush:plain"> /admin/elmah
</pre><p>works.  </p><p>Optional (but very preferable) is to secure your controller with Authorize attribute: </p><pre class="brush: csharp"> [Authorize(Users = "Admin")]
 public class ElmahController : Controller
 {
</pre><p>That&#8217;s it. </p><h2>Known issues</h2><p>One current known issue - if I&#8217;m using <code>SqlErrorLog</code> as error log class and press &#8220;Download log&#8221; button on ELMAH dashboard, you&#8217;ve got empty result. Unfortunately, it does not work now, since <a href="http://code.google.com/p/elmah/issues/detail?id=230">issue</a> in ELMAH core that I hope will be fixed in nearest release. </p><h2>NuGet package for it? </h2><p>I didn&#8217;t expect such popularity of that class, but now I seriosly think putting this on NuGet. I&#8217;ll try to package that as soon as possible. </p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/08/inside-aspnet-mvc-iresolver-and-its.html">
    
      Inside ASP.NET MVC: IResolver and it&#8217;s implementations</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-08-27T16:06:00+03:00" pubdate data-updated="true">Aug 27<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/insidemvc/'>InsideMVC</a>, <a class='category' href='/blog/categories/mvc/'>MVC</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>One of the major changes between MVC2 and MVC3 was introduction of Dependency Injection principles on a level of framework. If you compare, for instance <code>ControllerBuilder.cs</code> from MVC2 and <code>ControllerBuilder.cs</code> from MVC3 you will clearly see the difference. In MVC3 we are no longer create entities directly (through &#8216;new&#8217; operator), but instead we delegate that to <code>IResolver</code> interface. <code>IResolver</code> interface itself is extremely simple:<br />
</p><pre class="brush:csharp">namespace System.Web.Mvc {
    internal interface IResolver&lt;T&gt; {
        T Current { get; }
    }
}
</pre><p>We can just ask the instance of type we would like to resolve. Please also note, that <code>IResolver</code> is internal class, so it is not exposed and you will never use it in application directly.<br />
</p><p>All major entities of MVC framework (ControllerFactory, Filters, ViewEngines etc.) from now resolved by <code>IResolver</code> implementation class. That improves extensibility of framework very much and introduces new strategy of creation objects.<br />
</p><h2>Implementations of IResolver interface</h2><p>There are two classes that implements <code>IResolver</code> - <code>SingleServiceResolver</code> and <code>MultiServiceResolver</code>. Primary responsibility of those are delegation call to <code>IDependencyResolver</code> methods <code>GetService</code> and <code>GetServices</code>, respectively.<br />
</p><p>If they just recalling method of <code>IDependecyResolver</code> class, what&#8217;s are the purpose of those two classes?<br />
</p><p>There are 2 purposes I can see:<br />
</p><ol><li>To provide default type instance in case of type is not resolved by <code>IDependencyResolver</code>.</li>
<li>To create instance only once.</li>
</ol><h2>How it works?<br />
</h2><p>Now, let&#8217;s take a look how it actually works. It is really simple and small, so I&#8217;m able to put most of code here. <br />
</p><p>Construction:<br />
</p><pre class="brush:csharp">public SingleServiceResolver(Func&lt;TService&gt; currentValueThunk, TService defaultValue, string callerMethodName) {
 if (currentValueThunk == null) {
  throw new ArgumentNullException(&quot;currentValueThunk&quot;);
 }
 if (defaultValue == null) {
  throw new ArgumentNullException(&quot;defaultValue&quot;);
 }

 _resolverThunk = () =&gt; DependencyResolver.Current;
 _currentValueThunk = currentValueThunk;
 _defaultValue = defaultValue;
 _callerMethodName = callerMethodName;
}
</pre><p>You can see, it receives default factory method, default type instance and the name of caller method (used as additional information in exception).<br />
</p><p>Here, how <code>ControllerBuilder</code> creates the <code>SingleServiceResolver</code>, for instance:<br />
</p><pre class="brush:csharp">internal ControllerBuilder(IResolver&lt;IControllerFactory&gt; serviceResolver) {
 _serviceResolver = serviceResolver ?? new SingleServiceResolver&lt;IControllerFactory&gt;(
  () =&gt; _factoryThunk(),
   new DefaultControllerFactory { ControllerBuilder = this },
  &quot;ControllerBuilder.GetControllerFactory&quot;
 );
}
</pre><p>Since it implements only one property, current <code>Current</code>:<br />
</p><pre class="brush:csharp">public TService Current {
 get {
  if (_resolverThunk != null) {
   lock (_currentValueThunk) {
    if (_resolverThunk != null) {
     _currentValueFromResolver = _resolverThunk().GetService&lt;TService&gt;();
     _resolverThunk = null;

     if (_currentValueFromResolver != null &amp;&amp; _currentValueThunk() != null) {
      throw new InvalidOperationException(String.Format(CultureInfo.CurrentCulture, MvcResources.SingleServiceResolver_CannotRegisterTwoInstances, typeof(TService).Name.ToString(), _callerMethodName));
     }
    }
   }
  }
  return _currentValueFromResolver ?? _currentValueThunk() ?? _defaultValue;
 }
}
</pre><p>First, we check the existence of <code>_resolverThunk</code> it would always exist (having value of <code>() => DependencyResolver.Current</code>) for first call of the method. Then, we locking on <code>_currentValueThunk</code> protecting for multiple threads access the same method, same time. Then, we try to resolve given type by asking <code>_resolverThunk()</code> to <code>GetService&lt;TService&gt;()</code>.<br />
</p><p>After that we have an if-statement that I didn&#8217;t get from the very beginning. Fortunately, MVC project has bunch of good unit tests. As I found the test it turns clear to me. The test called <code>CurrentThrowsIfCurrentSetThroughServiceAndSetter</code> and it&#8217;s Assert part: <br />
</p><pre class="brush:csharp">[TestMethod]
public void CurrentThrowsIfCurrentSetThroughServiceAndSetter() {
 // Arrange
 TestProvider providerFromCurrentValueThunk = new TestProvider();
 TestProvider providerFromServiceLocation = new TestProvider();
 TestProvider providerFromDefaultValue = new TestProvider();
 Mock&lt;IDependencyResolver&gt; resolver = new Mock&lt;IDependencyResolver&gt;();

 resolver.Setup(r =&gt; r.GetService(typeof(TestProvider)))
   .Returns(providerFromServiceLocation);

 SingleServiceResolver&lt;TestProvider&gt; singleResolver = new SingleServiceResolver&lt;TestProvider&gt;(() =&gt; providerFromCurrentValueThunk, providerFromDefaultValue, resolver.Object, &quot;TestProvider.Current&quot;);

 //Act &amp; assert
 ExceptionHelper.ExpectException&lt;InvalidOperationException&gt;(
  () =&gt; singleResolver.Current,
  &quot;An instance of TestProvider was found in the resolver as well as a custom registered provider in TestProvider.Current. Please set only one or the other.&quot;
 );
}
</pre><p>This is really <strong>important</strong> and says: you should not create same type instance both with <code>IDependencyResolver</code> and factory method! In case of <code>ControllerFactory</code>: you should never provide your implementation of <code>IControllerFactory</code> and in the same time resolve <code>IControllerFactory</code> instance by <code>IDependencyResolver</code>. Same rule for all other types. You should decide how you would like to override default behavior. In MVC3 usage of <code>IDependencyResolver</code> is a preferable.<br />
</p><p>The code below is wrong:<br />
</p><pre class="brush:csharp">DependencyResolver.SetResolver(new DummyDependencyResolver());
ControllerBuilder.Current.SetControllerFactory(new DummyControllerFactory());
</pre><p>So, after that <code>_resolverThunk</code> is reset and we no longer ask <code>IDependencyResolver</code>, just returning the resolved value.<br />
</p><p><code>MultiServiceResolver</code> is even a little simpler. <br />
</p><pre class="brush:csharp">public IEnumerable&lt;TService&gt; Current {
 get {
  if (_itemsFromService == null) {
   lock (_itemsThunk) {
    if (_itemsFromService == null) {
     _itemsFromService = _resolverThunk().GetServices&lt;TService&gt;();
    }
   }
  }
  return _itemsFromService.Concat(_itemsThunk());
 }
}
</pre><p>The same, singleton strategy of resolving types and then just concatenating resolved by <code>IDependencyResolver</code> with ones retuned by default factory method. It looks strange, but it is legal here to have types resolved both by <code>IDependencyResolver</code> and factory.<br />
</p><h2>Conclusions<br />
</h2><p><code>IResolver</code>, <code>SingleServiceResolver</code> and <code>MultiServiceResolver</code> are all internal parts of framework. We are not directly using any of them. They used as kind of bridge between previous (MVC2) object creation strategy and new (MVC3) one. New strategy is using Service Locator (<code>IDependencyResolver</code>). It is important that we should never &#8216;mix&#8217; both in the same application. Preferable way is <code>IDependencyResolver</code>.<br />
</p><h2>What&#8217;s next?</h2><p>We are going to continues our journey of resolving types and meet <code>IDependencyResolver</code> closer.<br />
</p><p>Previous <a href="http://www.beletsky.net/2011/07/inside-aspnet-mvc-controllerbuilder.html">Inside ASP.NET MVC: ControllerBuilder class</a><br />
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/08/my-application-for-10kappart.html">
    
      My application for 10KAppart competition</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-08-24T10:37:00+03:00" pubdate data-updated="true">Aug 24<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/applications/'>Applications</a>, <a class='category' href='/blog/categories/design/'>Design</a>, <a class='category' href='/blog/categories/github/'>GitHub</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
Recently, I&#8217;ve met really interesting competition by <a href="https://twitter.com/#!/mixonline">@mixonline</a> called <a href="http://10k.aneventapart.com/">10K Appart</a>. Due to the rules, you have to create an application total size of which should not be more than 10K zipped content. Moreover, it have to be pure client-side application, utilizing HTML5/CSS3 features for responsible design and open API for gathering data. No frameworks, no 3rd parties. I decided to participate.
</p>
<p>
I&#8217;ve spent several hours to catch up idea. I was thinking about some application for twitter or gmail, but finally I stopped on github. First of all, github is my favorite service, it has clear and open API. Last year I contributed to javascript <a href="https://github.com/alexanderbeletsky/github-api">github-api</a>, so I knew how to start. Application idea is simple: analyze github account and based on actual achievements (number of repos, forks, issues etc.) assign corresponding badge. 
</p>
<p>
I did it a style of weekend project, started up Friday evening, I&#8217;ve spend 3 hours to complete github API adapter and application logic. As always, hard part was - design.
</p>
<p>
Even I a bit improved my design skill through this year.. still it is big challenge. I choose light blue color for main color and dark blue as auxiliary. I went with <a href="http://www.google.com/webfonts#ChoosePlace:select">Google Web Fonts</a> that I used before and was happy with results. Playing out with colors and gradients, I came up with such front page:
</p>
<a href="https://lh6.googleusercontent.com/-fglVyq8l120/TlSplwzu6mI/AAAAAAAAHkY/G76H-cvX2Eo/front.jpg">
<img src="https://lh6.googleusercontent.com/-fglVyq8l120/TlSplwzu6mI/AAAAAAAAHkY/G76H-cvX2Eo/front.jpg" alt="code" />
</a>
<p>
With much help of <a href="http://twitter.com/#!/Porosyaka">Sasha</a> we have designed badges part of application. I still not 100% happy, but at least it was quite fast.
</p>
<a href="https://lh5.googleusercontent.com/-gNn28suZBsU/TlSoOYQP5qI/AAAAAAAAHkI/T7eLlx4I3c0/badges.jpg">
<img src="https://lh5.googleusercontent.com/-gNn28suZBsU/TlSoOYQP5qI/AAAAAAAAHkI/T7eLlx4I3c0/badges.jpg" alt="code" />
<p>
</a>
After application were more or less ready, I put it on temporary hosting asking my dear <a href="http://twitter.com/#!/alexbeletsky">twitter</a> help me to validate it. I received a lot of great feedback (thanks a lot, guys). After all bugs were fixed, I posted my entry to 10K appart. 
</p>
<p>
I&#8217;ve been waiting about 4 days, to receive an answer. Meanwhile, I&#8217;ve seen that new application are being posted.. but not mine. Finally, they responded to me saying &#8220;Sorry, but Google Web Fonts are not allowed&#8221;. That was actually my bad, but I haven&#8217;t thought that are treated as 3rd party. Anyway, I had to switch to <a href="http://typekit.com/">TypeKit</a> very fast. I didn&#8217;t get same results as with Web Fonts, but I had no time for finding perfect match and reapplied again.
</p>
<p>
It finally available here - <a href="http://10k.aneventapart.com/Entry/Details/512">http://10k.aneventapart.com/Entry/Details/512</a>
</p>
<p>
I would be happy if you try it, tweet it, comment on site. Sources are placed on <a href="https://github.com/alexanderbeletsky/10k">github</a>, so If you think to improve design or create new type of badge, you are welcome!
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/08/it-jam-2011-in-odessa_23.html">
    
      IT Jam 2011 in Odessa</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-08-23T17:45:00+03:00" pubdate data-updated="true">Aug 23<span>rd</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/conference/'>Conference</a>, <a class='category' href='/blog/categories/itjam/'>ITJam</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>IT Jam is a conference for developers in Ukraine. Highly popularized through the last years now it became the most popular IT events in Ukraine. The slogan of conference is &#8220;Meet & Mix&#8221; saying it&#8217;s primary goal is to create good conditions for networking and experience sharing. </p><p>I&#8217;ve never been visiting IT Jam before. But this time, I not only visited but have a speech there. Moreover, the <a href="http://www.e-conomic.co.uk/">company</a> I work to was sponsoring .NET section.. and I got a honor to be a representative there. I&#8217;ve started to prepare on a very short notice, just 5 days before conference.. all of these facts let me a little nervous. </p><p>We decieded to go by car, with my great colleagues <a href="http://twitter.com/#!/korneliuk">@korneliuk</a> and <a href="http://twitter.com/#!/VladAlieks">@VladAlieks</a>. Having a good company is a key for any trip. I haven&#8217;t noticed how fast we came to Odessa. We stopped in Odessa&#8217;s <a href="http://skalodrom.od.ua/">Alpine club</a> where I used to spent great summer days during my rollerblading <a href="http://www.youtube.com/watch?v=TzrXoYSzT4Q&feature=channel_video_title">career</a>. We&#8217;ve got there late evening, so had a time only to install our tent, say hello to the sea and fall asleep.  </p><p>Next morning we have a breakfast and moved to the place. IT Jam took biggest area in Odessa, <a href="http://lifeglobe.net/blogs/details?id=313">Odessa&#8217;s See Terminal</a>. That was really cool, since there you definitely could feel the spirit of Odessa - sea breeze, sun, ships. <a href="http://www.linkedin.com/pub/marina-vyshegorodskikh/0/571/70b">Marina Vyshegorodskikh</a> and <a href="http://twitter.com/#!/Emfimbria">Alexandra Chudner</a> who opened the event, energized the crowd for the rest of the day. </p><p>I&#8217;ve spent most my time mostly in .NET section. IT Jam format of speeches are supposed to be short. That was something that I didn&#8217;t expect at the begining, so after the schedule been published I realized - it is just impossible to fit everything I want to say in such short period of time. Anyway, I had no option and have to start my speech.  </p><a href=""><br />
<img src="https://lh4.googleusercontent.com/-EJAqkayO9xo/TpZxh5beACI/AAAAAAAAHlE/EMWhdFsyfx0/s800/288852_188885197848166_100001800609058_414130_6492032_o.jpg" style="width: 620px" alt="Alexander Beletsky on IT Jam" /><br />
</a><br />
<br />
<p><a href="http://www.linkedin.com/pub/olga-didich-dio-ciklum-net/8/689/600">Olga Didich</a> did a great job helping out all speakers and timekeeping. So, I just step by on scene and started up. As always it&#8217;s quite hard to describe and show the code for such big crowd, but I tried the best. Of cause, I haven&#8217;t managed to accomplish all my speech.. but I was really happy that people were contacting me a lot of questions, just after it. We were sitting together with one guy after and I was showing the rest of my presentation just for him :). </p><p>As &#8220;Meet & Mix&#8221; format supposed, I had really nice talks with other developers. Ones, that I worked many years ago.. or ones we&#8217;ve met just recently.. or one&#8217;s we following each other in tweeter but had no chance to meet offline :). So, <a href="http://twitter.com/#!/dimapasko">@dimapasko</a>, <a href="http://twitter.com/#!/ChuniMuni">@ChuniMuni</a>, <a href="http://twitter.com/#!/xpinjection">@xpinjection</a>, <a href="http://twitter.com/#!/chaliy">@chaliy</a>, <a href="http://twitter.com/#!/antonvidishchev">@antonvidishchev</a>, <a href="http://www.linkedin.com/pub/dmitriy-davydov/4/8a2/b59">Dmitry Davydov</a> - guys, it very nice to see you there.. Thanks for your company and great beer-n-talks we had together. </p><p>At the evening I&#8217;ve met my old friends from Odessa and all our company moved back to Alpine club, to have a swim, drink and guitar playing on beach for all night. That was just amazing conclusion of that day. </p><p>I want to say big thanks, for everyone who involved in organization. Keep doing great job and improve from year to year. And for my friends who were always nearby, supported me and didn&#8217;t allow to be bored. </p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/08/analog-of-svn-branch-switch-for-git.html">
    
      Analog of SVN branch switch for Git</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-08-01T11:16:00+03:00" pubdate data-updated="true">Aug 1<span>st</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/git/'>Git</a>, <a class='category' href='/blog/categories/gitsvn/'>GitSVN</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
Working with Git in SVN based organization is <a href="http://www.beletsky.net/2011/06/how-to-start-using-git-in-svn-based.html">possible</a> and make a lot of benefits. Sources checked out once are now at you local repository, so all you do is commits, rebases and dcommits back to SVN. But sometimes you need to be able to switch to another SVN branch. You need something equivalent to &#8220;SVN switch&#8221; command inside Git environment.
</p>
<p>
I’m been trying to switch to new branch, but I found no related information about that. I ended up this solution, I would like to share.
</p>
<ol>
<li>Manually add new configuration into <code>~/.gitconfig</code>, for new SVN location</li>
<pre>
    [svn-remote "svn25"]
        url = https://svn.server/branches/branch25
        fetch = :refs/remotes/git-svn-25
</pre>
<li>Fetch changes from svn25</li>
<pre>
    git svn fetch svn25
</pre>
<li>Checkout that branch</li>
<pre>
    git checkout git-svn-25
</pre>
<li>Create new “master” branch</li>
<pre>
    git checkout -b master-25
</pre>
<li>
Now, master-25 is your “master” for <code>branch25</code> SVN branch.
</li>
</ol>
<p>
You can merge you previous changes.. and continue to work with <code>master-25</code> as you worked with usual master.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/07/how-to-be-better-developer-or-3.html">
    
      How to be better developer or 3 accounts rule</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-07-22T16:46:00+03:00" pubdate data-updated="true">Jul 22<span>nd</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/life/'>Life</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
Oh no, not again! - you might think. Yet another Mr.SmartyPants are going to share his own vision of how to improve in development.
</p>
<p>I&#8217;ll say very obvious thing - if you are going to be great in something, you have to do that a lot. Like, if you going to be a great snowboarder you have to ride a lot; If you going to be great mathematician you have to solve a lot of problems; If you going to be great developer you simply have to do a lot programming :). 
</p>
<p>
The road from &#8220;good to great&#8221; is long and difficult, you could not be great in one year.. or ten, or even whole life. But what you definitely can do, be a better. Only realizing that you are better than yesterday (month, year ago) is a great benefit, believe me.  
</p>
<p>
But just the fact of knowing &#8220;I need to do something a lot&#8221; would hardly could help you to progress. What you need to have is <strong>indicators</strong>. Simple criteria&#8217;s that make you understand what your progress is. Are doing great or you suck?
</p>
<p>
Three account&#8217;s that I created almost year ago, help me to get those indicators.
</p>
<ul>
<li>
<strong>github.com</strong> - producing of code, that what we do. you have to have github to store all code you produce, doesn&#8217;t matter it is a product or tool or just a <a href="https://gist.github.com/">gist</a> you created to help someone - it have to be stored. with a github you should be able to see how much you coding are changing through the time. you should review you last year code and think &#8220;Oh, God I suck a lot!&#8221;.
</li>
<li>
<strong>blogger.com</strong> - besides of code writing, you have to share your technical thoughts. the blog, is a great motivator for seeking and sharing knowledge. as well as coding, blogging requires much skills. I see some relation between producing good code and good post. blog would also help you to look back, to remind you problems you was thinking of.. and how much you were right on that? is your opinion changed on some topics or not?
</li>
<li>
<strong>stackoverflow.com</strong> - if you can&#8217;t explain something to another, you don&#8217;t understand it. giving an answers is extremely difficult, especially in such competitive environment as stackoverflow. the time I created account there I was not able to give any answer in meaningful time. I just had not enough skills for that. stackoverflow is great indicator, since it contains a reputation system.
</li>
</ul>
<p>
Well, do you think it is useful? It works for me and I&#8217;m going to proceed. 
</p>
<p>
PS. That&#8217;s my 100 post for this blog.. and that&#8217;s my Friday before week vacation.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  <div class="pagination inner pure-u-1">
    
      <a class="prev" href="/blog/page/12/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/10/">Newer &rarr;</a>
    
  </div>
</div></div>
	<footer class="pure-g-r"><div class="inner pure-u-1">
	<p>
		Theme by <a href="https://twitter.com/alexbeletsky">@alexbeletsky</a> | Fonts by <a href="http://www.google.com/fonts/">Google Fonts</a> | Icons by <a href="http://fontello.com/">Fontello</a> | Hosted on <a href="http://github.com">github</a> | Powered by <a href="http://octopress.org/">Octopress</a>
	</p>
	<p>
		Copyright © 2010 - 2013 beletsky.net
	</p>
</div>

</footer>
	<div class="buttons">
	


	
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


	
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


	
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


	

</div>
</body>
</html>
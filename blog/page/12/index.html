
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Alexander Beletsky's development blog</title>
  <meta name="author" content="Alexander Beletsky">

  
  <meta name="description" content=".NET Saturday in Ciklum May 14th, 2011 Conference This Saturday it was really nice event organized and hosted by Ciklum. I had a big pleasure to be &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alexanderbeletsky.github.io/blog/page/12/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/fontello.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/pure-min.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Alexander Beletsky's development blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:800' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato:300,500,800' rel='stylesheet' type='text/css'>

  

</head>


<body>
	<header class="pure-g-r"><div class="pure-g-r">
	<div class="inner pure-u-1">
		<h4 class="light">Alexander Beletsky's development blog</h4>
		<h1>My profession is engineering</h1>
		<nav role="navigation" class="pure-menu pure-menu-open pure-menu-horizontal"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/projects">Projects</a></li>
	<li><a href="/talks">Talks</a></li>
	<li><a href="/blog/archives">Archive</a></li>
	<li><a href="/about">About me</a></li>
</ul>

</nav>
	</div>
</div>

</header>
	<div class="social inner pure-menu-horizontal"><ul>
	<li><a class="twitter icon-twitter" href="http://twitter.com/alexbeletsky"></a></li>
	<li><a class="github icon-github-circled" href="https://github.com/alexanderbeletsky"></a></li>
	<li><a class="stackoverflow icon-stackoverflow" href="http://stackoverflow.com/users/386751/alexanderb"></a></li>
	<li><a class="rss icon-rss" href="http://feeds.feedburner.com/abeletskyblog"></a></li>
</ul>
</div>
	<div id="content" class="inner pure-g-r"><div class="blog-index">
  
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/05/net-saturday-in-ciklum.html">
    
      .NET Saturday in Ciklum</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-05-14T21:19:00+03:00" pubdate data-updated="true">May 14<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/conference/'>Conference</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
This Saturday it was really nice event organized and hosted by <a href="http://www.ciklum.net/">Ciklum</a>. I had a big pleasure to be part of the event and was given a speech about Continues Production (Delivery) and my experience of using UppercuT, RoundhouE and Jenkinks for that. 
</p>
<img style="position: relative; display: inline; float: left; " src="https://lh6.googleusercontent.com/_stL4bIIuRUs/Tc68_M3LaaI/AAAAAAAAHaM/TrFD0GQgQq0/IMG_4956.JPG" />
<p>
The organization of event was really nice. Only the speakers were one who introduced disorder there :). Some speeches were bit longer than planned, that&#8217;s why schedule ruined from the very beginning of event. My speech was planned for 0.5 hour, but I&#8217;ve been 1 hour on stage.
</p>
<p>
I&#8217;ve been pretty nervous since I never gave public speeches, but I really liked that experience. I hope to visit/participate more .NET events in future. At the end I was happy that everything is alright and I&#8217;m finally done. So, in great mood and relaxed I stayed to listen for the rest of speakers.
</p>
<p>
Also I was really nice to meet <a href="http://twitter.com/#!/skalinets">Sergey Kalinets</a>, <a href="http://twitter.com/#!/antonvidishchev">Anton Vidishchev</a> who shared their experience in TDD and ASP.net MVC framework. Such type of event are really great for professionals gathering, helping to better communication and knowledge sharing. 
</p>
<p>
Let me wish Ciklum and Inna Tueva in particular to have will and energy for organizing such events. Thanks a lot!
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/05/continuous-production-make-it-work.html">
    
      Continuous Delivery: Make it work</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-05-11T10:27:00+03:00" pubdate data-updated="true">May 11<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/continuous/'>Continuous</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
As soon as we <a href="http://www.beletsky.net/2011/05/continues-production-setup-and-run.html">setup</a> project infrastructure in a way that build and deploy is done by one batch command, we are ready to run this process continuously. It is possible to take any CI server you want, I stopped on <a href="http://jenkins-ci.org/">Jenkins</a>.. basically it contains everything I need. But before start with Jenkins, let&#8217;s one more time take a look current infrastructure and goals.
</p>
<h2>Git branching model</h2>
<p>
There is great <a href="http://nvie.com/posts/a-successful-git-branching-model">article</a> on that topic, I used main ideas from that. So, I have 2 branches in my <code>origin</code> that exists all the time. They are: <code>master</code> and <code>development</code>. All pushes I do during implementation are going to <code>development</code> branch. No direct pushes are made to <code>master</code> at all (there are some exceptions of cause, but I try to follow that rule). As soon as code in <code>development</code> is stabilized, I prepare special <code>release</code> branch (update version and small clean up there) and <code>release</code> is being merged to <code>master</code> as it tested and everything is fine.
</p>
<h2>Staging and Production environments</h2>
<p>
I define 2 types of environments: Staging and Production. Environment includes: binaries, markup, database, deploy scripts.
</p>
<p>Everything that is being developed are goes to staging environment immediately (and automatically). Production update is being run manually as soon as all testing on Staging are finished. Separation of environments is great idea. Even if we are trying hard to have potentially shippable software during each build, this is not true. It is usually a lot of problems in latest version that need to be fixed before production server update.
</p>
<p>
So, Staging is a result of build/deploy of <code>development</code>; Production is a result of build/deploy of <code>master</code>. 
</p>
<p>
In my case, everything you see <a href="http://stage.trackyt.net/">here</a> is a result of build of <a href="https://github.com/alexanderbeletsky/trackyt.net/tree/development">this</a>. Everything you see <a href="http://www.trackyt.net/">here</a> is a result of <a href="https://github.com/alexanderbeletsky/trackyt.net">this</a>.
</p>
<h2>What I want to get?</h2>
<p>
I want to have automatic system that would update my <a href="http://stage.trackyt.net/">Staging</a> with every push to <code>development</code> branch and I want automatic system that would update my <a href="http://www.trackyt.net/">Production</a> as soon as <code>master</code> branch is ready to. As it said in <a href="http://www.beletsky.net/2011/04/continues-production-overview-and.html">overview</a> having such system is great reduce of deployment overhead. Let&#8217;s make this happen!
</p>
<p>
As I said earlier I would use <a href="http://jenkins-ci.org/">Jenkins</a>. Great stuff about this software that is very intuitive! Setup is easy and fun, I would put just a little guidance of process.
</p>
<h2>Local Jenkins server setup</h2>
<p>
As you download Jenkins WAR file, it is easy to start just with <code>java -jar jenkins.war</code>. Now, the dashboard is available at <code>http://localhost:8080/</code>.
</p>
<h3>Plugins</h3>
<p>
First, you should add all required plugins. It already contains some, but some are missing. I&#8217;ve add such to my default configuration:
</p>
<ul>
<li><a href="http://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin">Jenkins GIT plugin</a></li>
<li><a href="http://wiki.jenkins-ci.org/display/JENKINS/Github+Plugin">Github plugin</a></li>
<li><a href="http://wiki.jenkins-ci.org/display/JENKINS/NUnit+Plugin">NUnit Plugin</a></li>
</ul>
<p>
Go to &#8220;Manage Jenkins&#8221; -> &#8220;Manage Plugins&#8221; and install missing one.
</p>
<p>
So, my configuration looks like this:
</p>
<!-- plugins.png -->
<img src="https://lh6.googleusercontent.com/_stL4bIIuRUs/Tco7BUnOiGI/AAAAAAAAHZk/XSxs5Y_zrR0/plugins.png" alt="plugins" />
<h3>Configure system</h3>
<p>
Now go to &#8220;Manage Jenkins&#8221; -> &#8220;Configure System&#8221; and find &#8220;Git&#8221; section there. You should provide with your user name and path to Git. I have git in my PATH variable (recommend you do the same). 
</p>
<h3>Create new job</h3>
<p>
After basic configuration is done, let&#8217;s define new job. Go to &#8220;New job&#8221;. In common section you should give your job name and provide with githib path to repository.
</p>
<img src="https://lh5.googleusercontent.com/_stL4bIIuRUs/Tco7A-XTqYI/AAAAAAAAHZg/0kLPsWXWj6k/common-section.png" alt="common section" />
<p>
In Source Control Management: URL to Git repository, Branch to build and Repository browser (optional).
</p>
<!-- SCM.png -->
<img src="https://lh6.googleusercontent.com/_stL4bIIuRUs/Tco7Bh2RuUI/AAAAAAAAHZs/p568dcfUStk/SCM.png" alt="SCM" />
<p>
Build triggers (explain a bit later).
</p>
<!-- build-triggers.png -->
<img src="https://lh4.googleusercontent.com/_stL4bIIuRUs/Tco7A6XC3ZI/AAAAAAAAHZY/X39bPBs9U3Q/build-triggers.png" alt="build-triggers" />
<p>
In Build section you specify commands to build/test/package and to deploy results. See my <a href="http://www.beletsky.net/2011/05/continues-production-setup-and-run.html">previous post</a> for details.
</p>
<!-- build.png -->
<img src="https://lh4.googleusercontent.com/_stL4bIIuRUs/Tco7A76md_I/AAAAAAAAHZc/5JPyCIL5Pek/build.png" alt="build" />
<p>
Finally in Post-build section, specify path to grab artifacts.
</p>
<!-- post-build.png -->
<h3>Test it locally</h3>
<p>
As soon as configuration is done, you can test your build locally. Just start your job and make sure that: build run, tests executed, new database deployed, new application deployed. Basically if everything done correctly in previous <a href="http://www.beletsky.net/2011/05/continues-production-setup-and-run.html">steps</a> you should not experience any troubles. If it is fine that means the configuration is simply ready to be put to production server.
</p>
<h2>Move it to production</h2>
<p>
As it defined, our goal is to update staging and production with out any manual work. The simplest scenario then CI server resides on the same machine as production server. 
</p>
<p>
Great thing about Jenkins is that it requires no installation. So, I packed all content of <code>~/User/Jenkins</code> folder and Git into one single package and FTP&#8217;ed to my production server. As you unpack, configure Git in PATH variable, setup up your private repository keys it is just simply ready to work. Now, test it remotely - staging and production should be able to update with one single click on Jenkins dashboard. 
</p>
<h3>Little adjustments for production server</h3>
<p>
My VPS has Windows auto-update enabled, so It is being rebooted from time to time. As it is being rebooted, you should start Jenkins manually. Fortunately it has really nice feature - Jenkins might be run as <a href="https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+as+a+Windows+service">Windows Service</a>. This is extremely useful, I recommend to do it from very beginning. 
</p>
<h3>Using Github hook to automate build run</h3>
<p>
I want my every commit to <code>development</code> to be tested and to be visible on Stage. As it said in <strong>Configure system</strong> part, you can setup build triggers. With build trigger you can run build just by requesting this URL <code>http://jenkins.server/jobname/build?token=TOKEN</code>.
</p>
<p>
In github repository go to Admin section and setup new hook in &#8220;Post Recieve URLs&#8221; section, like this:
</p>
<!-- gtihub -->
<img src="https://lh4.googleusercontent.com/_stL4bIIuRUs/TcpDr67qBpI/AAAAAAAAHZ4/bL1s9Lwhh7g/s912/github.png" alt="github" />
<p>
This concludes the setup.
</p>
<h2>Control your builds all the time</h2>
<p>
What we did is only very basic setup, but it already gives a lot of power. It is really easy to track all builds/artifacts/history of changes. Downtime of site is extreamly slow (comparing to manual changes). Dashboard is very convenient to control builds:
</p>
<!-- dashboard -->
<img src="https://lh6.googleusercontent.com/_stL4bIIuRUs/TcpEsDXvmmI/AAAAAAAAHZ8/c7ttFDLm_fA/s912/dashboard.png" alt="dashboard" /></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/05/continues-production-setup-and-run.html">
    
      Continuous Delivery: Setup and run</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-05-02T11:39:00+03:00" pubdate data-updated="true">May 2<span>nd</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/continuous/'>Continuous</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
In my <a href="http://www.beletsky.net/2011/04/continuous-production-overview-and.html">previous post</a> I tried to make it clear that continuous production is for good. This post I&#8217;ll show how to prepare environment for continuous production. The idea is that you should be able to configure and test it locally. All configurations have to be part of source code under SCM. It should not depend on machine and run any environment you like. Success criteria is: pick up clean machine, do checkout, run build.bat/deploy.bat and have installed web application.
</p>
<h2>Integration and database deployment</h2>
<p>
As I said, <a href="http://www.beletsky.net/2010/10/uppercut-your-builds.html">UppercuT</a> and <a href="http://www.beletsky.net/2010/10/roundhouse-your-database.html">RoundhousE</a> are really nice tools for that. As soon as you follow the instruction&#8217;s you will have a <code>build.bat</code>, that would be able to build up all binaries, run tests against that and put all build artifacts to package. That is pretty good for start, but we still missing &#8220;deployment&#8221; part.
</p>
<p>
As you a little bit more familiar with UppercuT, it provides good facilities for deployment as well. Basically, there are folder <code>deployment\templates\</code> where you able to define your custom deployment scripts. Typical web application requires 2 scripts:
</p>
<ul>
<li>AppDeployment.bat - for web site deployment</li>
<li>DbDeployment.bat - for database deployment</li>
</ul>
<p>
There files are templates, from which script for particular <code>environment</code> is generated. The environment is defined in <code>settings</code> folder and include such information as deploy folder, web site name, database name, server name as number of variables. Example,
</p>
<pre class="brush: xml">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;project name=&quot;Settings&quot;&gt;
  &lt;!-- environment settings --&gt;
  &lt;property name=&quot;environment&quot; value=&quot;PRODUCTION&quot; /&gt;
  &lt;!-- servers --&gt;
  &lt;property name=&quot;server.database&quot; value=&quot;.\SQLEXPRESS&quot; /&gt;
  &lt;property name=&quot;web.deploy.folder&quot; value=&quot;c:\trackyt.net\web\&quot; /&gt;
  &lt;property name=&quot;web.site.name&quot; value=&quot;trackyt.net&quot; /&gt;

  &lt;property name=&quot;database.name&quot; value=&quot;trackytdb&quot; /&gt;
  &lt;property name=&quot;log.level&quot; value=&quot;DEBUG&quot; /&gt;
  &lt;property name=&quot;app.user.name&quot; value=&quot;alexander.beletsky&quot; /&gt;

  &lt;!-- base settings --&gt;
  &lt;property name=&quot;project.name&quot; value=&quot;trackyt.net&quot; overwrite=&quot;false&quot; /&gt;
  &lt;property name=&quot;repository.path&quot; value=&quot;git://github.com/alexanderbeletsky/trackyt.net&quot; /&gt;
  &lt;property name=&quot;folder.app.drop&quot; value=&quot;${project.name}&quot; overwrite=&quot;false&quot; /&gt;
  &lt;property name=&quot;folder.database&quot; value=&quot;db&quot; overwrite=&quot;false&quot; /&gt;

  &lt;!-- database deployment --&gt;
  &lt;property name=&quot;dirs.db&quot; value=&quot;..\${folder.database}&quot; /&gt;
  &lt;property name=&quot;file.version&quot; value=&quot;_BuildInfo.xml&quot; overwrite=&quot;false&quot; /&gt;
  &lt;property name=&quot;restore.from.path&quot; value=&quot;..\${database.name}.bak&quot; overwrite=&quot;false&quot; /&gt;
  
&lt;/project&gt;
</pre>
<p>
In template .bat file it is possible to refer, to some particular variable, so it is possible to make those quite generic. After build, template .bat files are post-processed and actual batch is generated. The name would be like <code>ENVIRONMENT.AppDeployment.bat</code>, where ENVIRONMENT is type of environment you defined.
</p>
<h2>Web site deployment script</h2>
<p>
If you do ASP.net (MVC) website in 99.9% cases you will be happy with simple <code>XCOPY</code> deployment type. Basically it means, simple copy of website to defined IIS folder. 
</p>
<p>
But, as soon it is continuous production deploy it means that Web Site is already running. It would not be possible to re-write some files, since they could be used by IIS. So, we need to stop the site before update. I found very good possibility for that with <code>%windir%\system32\inetsrv\appcmd</code> command. After site is stopped, we just copy full content of Web folder, remove some redundant files and run site again. In batch code it would look like,
</p>
<pre class="brush: plain">
@echo off

SET DIR=%~d0%~p0%

SET web.deploy.folder="${web.deploy.folder}"

echo stopping web site..
call %windir%\system32\inetsrv\appcmd stop site ${web.site.name}
if %ERRORLEVEL% NEQ 0 goto errors

echo copy application content
rmdir /s /q %web.deploy.folder%
xcopy /E /F /H /R ..\_PublishedWebSites\Web %web.deploy.folder%
xcopy ..\build_artifacts\_BuildInfo.xml %web.deploy.folder%
if %ERRORLEVEL% NEQ 0 goto errors

echo remove redudant files
del %web.deploy.folder%*Tests*.htm*
del %web.deploy.folder%Web.Debug.config  
del %web.deploy.folder%Web.Release.config 
del %web.deploy.folder%*packages* 
if %ERRORLEVEL% NEQ 0 goto errors

echo starting web site
%windir%\system32\inetsrv\appcmd start site ${web.site.name}
if %ERRORLEVEL% NEQ 0 goto errors

goto finish

:errors
EXIT /B %ERRORLEVEL%

:finish
</pre>
<h2>Database deployment script</h2>
<p>
<a href="http://www.beletsky.net/2010/10/roundhouse-your-database.html">RoundhousE</a> does all infrastructure work for us. All we need to create a batch file, that would be able to run during continuous production cycle. As well as <code>AppDeployment.bat</code> I defined <code>DbDeployment.bat</code> in <code>deployment\templates\</code> folder. But before any update of database it is always good to have a backup, to be able to restore from it if something went wrong. Actually, RoundhousE should have such ability, but unfortunately I didn&#8217;t get how to use it. I&#8217;ve created my simple SQL script that is able to backup.
</p>
<pre class="brush: sql">
USE $(Database);
GO
BACKUP DATABASE $(Database)
TO DISK = 'C:\backup\$(Database).bak'
   WITH FORMAT,
      MEDIANAME = 'C_SQLServerBackups',
      NAME = 'Full Backup of $(Database)';
GO
</pre>
<p>
And corresponding batch file, that would run <code>backup.sql</code>.
</p>
<pre class="brush: plain">
@echo off

if '%1' == '' goto usage
if '%2' == '' goto usage

sqlcmd -S %1 -i .\scripts\backupdb.sql -v Database = %2 -e
if %ERRORLEVEL% NEQ 0 goto errors

goto finish

:usage
echo.
echo Usage: backup.bat [server] [database]
echo [server] - server eg. mymachine\SQLEXPRESS
echo [database] - name of database to backup
echo.
EXIT /B 1

:errors
EXIT /B %ERRORLEVEL%

:finish
</pre>
<p>
Both files are placed into <code>deployment\scripts</code> folder. So, the <code>DbDeployment.bat</code> template, would first run database backup and if it is successfull, run RoundhousE to update database.
</p>
<pre class="brush: plain">
@echo off

SET database.name="${database.name}"
SET sql.files.directory="${dirs.db}"
SET server.database="${server.database}"
SET repository.path="${repository.path}"
SET version.file="${file.version}"
SET version.xpath="//buildInfo/version"
SET environment="${environment}"

echo backup database
call .\scripts\backupdb.bat %server.database% %database.name%
if %ERRORLEVEL% NEQ 0 goto errors

echo update database
"%DIR%rh\rh.exe" /d=%database.name% /f=%sql.files.directory% /s=%server.database% /vf=%version.file% /vx=%version.xpath% /r=%repository.path% /env=%environment% --ni --simple
if %ERRORLEVEL% NEQ 0 goto errors

goto finish

:errors
EXIT /B %ERRORLEVEL%

:finish
</pre>
<h2>Putting it all together</h2>
<p>
We already have <code>build.bat</code> as part of UppercuT, now we need to define <code>deploy.bat</code> that would do deployment of product. It would be called immediately after build.bat finished, so binaries are ready, tests passed and <code>code_drop</code> folder contains all artifacts for deployment. The script is rather simple and utilize stuff we did previously.
</p>
<pre class="brush: plain">
@echo off

if '%1' == '' goto usage

SET ENV=%1

cd .\code_drop\deployment

echo Deploy database
call .\%ENV%.DbDeployment.bat
if %ERRORLEVEL% NEQ 0 goto errors

echo Deploy application
call .\%ENV%.AppDeployment.bat
if %ERRORLEVEL% NEQ 0 goto errors

goto finish

:usage
echo.
echo tracky.net deploy script
echo Usage: deploy.bat [environment]
echo [environment] - deployment environment could be STAGING or PRODUCTION
echo.
EXIT /B 1

:errors
echo Build FAILED
EXIT /B %ERRORLEVEL%

:finish
echo Build SUCCESS
</pre>
<p>
Notice, it receives the parameter <code>ENV</code>. It will contain type of environment for deployment. For staging environment, you should call <code>deploy.bar STAGING</code>, for production <code>deploy.bat PRODUCTION</code>.
</p>
<h2>Testing it out</h2>
<p>
That&#8217;s basically it. Now, you should make sure everything works as expected. Run <code>build.bat/deploy.bat</code>, make sure build went with no errors, deploy.bat correctly does back up of database, updates database and update site content. 
</p>
<p>
As I said on top, it is very important that configuration is part of product, part of source code. If you follow this, it will be possible to deploy application but just getting sources from SCM. This is first step of setting up your Continuous Production server.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/04/continues-production-overview-and.html">
    
      Continuous Delivery: Overview and benefits</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-04-28T22:50:00+03:00" pubdate data-updated="true">Apr 28<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/continuous/'>Continuous</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
First time I&#8217;ve heard about continuous production systems about 5 years ago. I was amazed with simple idea, not only build binaries and run tests against it but: generate documentation, deploy and release! Wow. But that time, I&#8217;ve been working on product that distributed on CD&#8217;s and it was not really easy to build Continuous Production around that. Web changed the way of distribution of software - you need only to update one &#8220;place&#8221; and all users would immediately receive latest version. Continuous Production very much suites web product development and month ago I&#8217;ve created my own Continues Production configuration and now would like to share some thoughts and that topic.
</p>
<h2>(Integration + Deployment) * Continues = (Continuous Production)</h2>
<p>
As for me, formula of continuous production is simple.. Decide how to do integration, decide how to do deployment and make it run continuously. The process is triggered by event. Event is raised by some event source.
</p>
<h2>What I used for that?</h2>
<p>
It is basically 4 components: <a href="http://www.beletsky.net/2010/10/uppercut-your-builds.html">UppercuT</a> and <a href="http://www.beletsky.net/2010/10/roundhouse-your-database.html">RoundhousE</a> for Integration and Deployment. <a href="http://jenkins-ci.org/">Jenkins</a> as build server. <a href="http://github.com">Github</a> as event source and SCM. 
</p>
<p>
You should check my previous posts about configuration of <a href="http://www.beletsky.net/2010/10/uppercut-your-builds.html">UppercuT</a> and <a href="http://www.beletsky.net/2010/10/roundhouse-your-database.html">RoundhousE</a>. It rather simple and allowed me version all assemblies and database, build all binaries and web site, run tests and put all build artifacts to single package. It also generates deployment and database migration scripts.
</p>
<p>
I was really happy about <a href="http://jenkins-ci.org/">Jenkins</a>. It is easy to install, understand and configure. Even it is Java application, it allows you to work with .NET and contains infinite number of plugins for every need (Batch build, Nant, Git, Svn, Msbuild etc).
</p>
<h2>Why should I use that?</h2>
<p>
Ok, to explain you the value, I would describe my production process <strong>Before</strong> and <strong>After</strong> implementation of CP.
</p>
<h3>Before</h3>
<ol>
<li>Prepare release branch and merge all required changes there</li>
<li>Update version in uppercut.config</li>
<li>Commit changes to SCM</li>
<li>Run build.bat</li>
<li>FTP package to deployment server</li>
<li>RDP to deployment server</li>
<li>Unpackage .zip content to temp folder</li>
<li>Manually backup <em>staging</em> database</li>
<li>Stop Stage Web site in IIS manager</li>
<li>Run migration scripts for <em>staging</em> database</li>
<li>Run deployment scripts for <em>staging</em> environment</li>
<li>Run Stage Web site in IIS manager</li>
<li>Test manually that on <em>staging</em> server, that build works fine</li>
<li>If something missed (note it is 60% of all cases) go to 1</li>
<li>Manually backup <em>production</em> database</li>
<li>Stop Production Web site in IIS manager</li>
<li>Run migration scripts for <em>production</em> database</li>
<li>Run deployment scripts for <em>production</em> environment</li>
<li>Run Production Web site in IIS manager</li>
<li>Test manually that on <em>production</em> server, that build works fine</li>
</ol>
<p>
Depending on how much lucky I&#8217;m that took from 0.5 hour to 1.5 hour to update production server. Moreover, because it is all manual changes Down time of web site was about 3-5 minutes. Sad figures.
</p>
<h3>After</h3>
<ol>
<li>Prepare release branch and merge all required changes there</li>
<li>Update version in uppercut.config</li>
<li>Commit changes to SCM</li>
</ol>
<p>
That&#8217;s it! The rest is steps is being automated by CP server. 
</p>
<p>
It takes from 1 to 2 minutes total. Down time of site is now only 1 second. That means velocity of &#8220;going live&#8221; improved in 45x, site down time improved 300x. Taking into account that I spent near 10 hours to configure whole system, I would say - that was pretty good investment on time. My staging server is being updated every time I push new code changes, so I could immediately test it and correct. Production server update run manually, as soon as I got stable release branch with only one button click.
</p>
<h2>Further reading</h2>
<ul>
<li>Setup and run <a href="http://www.beletsky.net/2011/05/continues-production-setup-and-run.html">http://www.beletsky.net/2011/05/continues-production-setup-and-run.html</a></li>
<li>Make it work <a href="http://www.beletsky.net/2011/05/continuous-production-make-it-work.html">http://www.beletsky.net/2011/05/continuous-production-make-it-work.html</a>

</ul></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/04/prevention-of-jscss-content-to-be.html">
    
      Prevention of JS/CSS content to be cached</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-04-22T18:50:00+03:00" pubdate data-updated="true">Apr 22<span>nd</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/javascript/'>JavaScript</a>, <a class='category' href='/blog/categories/mvc/'>MVC</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>, <a class='category' href='/blog/categories/asp-dot-net/'>asp.net</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
To do not waste a time in pauses between <a href="http://www.beletsky.net/search/label/Agile">AgileBaseCamp</a> talks I&#8217;ve created an utility that I wish to have, but had not time to do. It is very simple and solves caching issue for CSS and JS that we all suffered many times. Because every modern browsers try to cache static content, to make site rendering faster, we having trap then CSS or JS is being updated, but after deployment on production customers still see no results, because they use previous versions of files.
</p>
<h2>Classical way</h2>
<p>
Classical way of solving the issue is to add version info to content url and update it after each production update.
</p>
<pre class="brush: html">    
&lt;link rel=&quot;stylesheet&quot; href=&quot;Content/public.css?v=123&quot; type=&quot;text/css&quot; media=&quot;all&quot; /&gt;
&lt;script src=&quot;Scripts/script.js?v=123&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
</pre>
<p>
The problem is that you have to remember to update version manually, before each deployment to production. That was something I was doing a lot and now decieded to automate it.
</p>
<h2>Better way</h2>
<p>
Idea is very simple, create a helper that would use version from assembly and append version to resource. Now, in markup I wrote:
</p>
<pre class="brush: html">
&lt;link rel=&quot;stylesheet&quot; href=&quot;@Url.ContentWithVersion(&quot;~/Content/public.css&quot;)&quot; type=&quot;text/css&quot; media=&quot;all&quot; /&gt;
&lt;script src=&quot;@Url.ContentWithVersion(&quot;~/Scripts/script.js&quot;)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
</pre>
<h2>Code</h2>
<pre class="brush: csharp">
namespace Web.Helpers.Extensions
{
    public static class UrlContentWithVersionExtension
    {
        private static string _currentAssemblyVersion;

        public static string ContentWithVersion(this UrlHelper helper, string path)
        {
            var contentPath = helper.Content(path);
            var assemblyVersionString = GetAssemblyVersionString();

            return string.Format("{0}?ver={1}", contentPath, assemblyVersionString);
        }

        private static string GetAssemblyVersionString()
        {
            if (_currentAssemblyVersion == null)
            {
                var currentAssemblyVersion = Assembly.GetExecutingAssembly().GetName().Version;
                _currentAssemblyVersion = currentAssemblyVersion.ToString().Replace(".", "");
            }

            return _currentAssemblyVersion;
        }
    }
}
</pre>
<p>
And don&#8217;t forget that each page that uses the extension method, should include this namespace:
</p>
<pre class="brush: html">
&lt;!-- For MVC2 --&gt;
&lt;%@Import Namespace=&quot;Web.Helpers.Extensions&quot; %&gt;

&lt;!-- For MVC3 (Razor) --&gt;
@using Web.Helpers.Extensions
</pre>
<h2>Example of usage</h2>
<p>
As always all code is on github, so extension itself is <a href="https://github.com/alexanderbeletsky/trackyt.net/blob/master/src/Web/Helpers/Extensions/UrlContentWithVersionExtension.cs">here</a>. And commit there I integrated changes is <a href="https://github.com/alexanderbeletsky/trackyt.net/commit/ef38ebcd1230404b9e5c62877e256aff7e95ad64">here</a> (would be useful to review, before your actual changes).
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/04/agilebasecamp-kiev-2011-dmitry-mindra.html">
    
      AgileBaseCamp Kiev 2011: Dmitry Mindra: Design by Contract in .NET</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-04-20T12:05:00+03:00" pubdate data-updated="true">Apr 20<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/agile/'>Agile</a>, <a class='category' href='/blog/categories/conference/'>Conference</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
<small>
<strong>Disclaimer:</strong> text below is compilation of notes I made on AgileBaseCamp 2011 conference, listening to different speakers. I do it to keep knowledge I got on conference, share it with my colleagues and anyone else who interested. It is only about how I heard, interpret, write down the original speech. It also includes my subjective opinion on some topics. So it could not 100% reflects author opinion and original ideas. 
</small>
</p>
<p>
<a href="http://kiev.agilebasecamp.org/mindra/">Dmitry Mindra</a> prepared very nice speech dedicated to <a href=http://en.wikipedia.org/wiki/Design_by_Contract">Code Contracts</a>. He opens ideas what the Code Contacts are and more important how to &#8220;Design by contract&#8221;. This speech has been especially interested to me, since I never heard/used such type of design.
</p>
<h2>Design by contract in short</h2>
<p>
Desing by contracts has been introduced by <a href="http://en.wikipedia.org/wiki/Bertrand_Meyer">Bertrand Mayer</a>. He is one of original creator of Eiffel language. No surprise that first time contract&#8217;s have been added in Eiffel. The contract consists on 3 parts: Preconditions/Postconditions/Invariants.
</p>
<ul>
<li><strong>Preconditions</strong> - check that client does everything OK</li>
<li><strong>Postconditions</strong> - check that server does everything OK</li>
<li><strong>Invariant</strong> - check that state of object valid for next call</li>
</ul>
<p>
In Eiffel you have special sections in each method called (require, do, post) there it is possible to put contract definition.
</p>
<p>
By specifying the contract we specify exact constraints for code. Typically methods have some input parameters and return some results to outside world. For instance we have class <code>Account</code> with method <code>Withdraw</code>, we are expecting that argument that <code>Withdraw</code> receives are always positive and return results also is greater than zero. 
</p>
<h2>Wait, I can already specify contract with my beloved exceptions</h2>
<p>
Many of us, get used to write such code..
</p>
<pre class="brush: csharp">
public Amount Withdraw(Amount amountToWithdraw)
{
 if (amountToWithdraw == null)
 {
  throw new ArgumentException("amountToWithdraw");
 }
 
 if (amountToWithdraw.Value <= 0)
 {
  throw new ArgumentException("amountToWithdraw.Value");
 }
 
 var result = //.. calculate operation here.. ;
 
 if (result.Value <= 0)
 {
  throw new AccountOperationException();
 }
 
 return result;
}
</pre>
<p>
It is definitely the way of creation robust application (in case of all those conditions are tested and client code properly handles exceptions). But is has several drawbacks:
</p>
<ul>
<li>It is only run-time mechanism</li>
<li>It is not possible to turn on or turn off the exceptions</li>
<li>This type of contract is &#8220;method-wide&#8221;, but how can you specify &#8220;class-wide&#8221; contract?</li>
<li>All of if / throw statements are &#8220;code-garbage&#8221; that make it difficult to read</li>
</ul>
<h2>What we have in .NET?</h2>
<p>
The Common Language Runtime (CLR) team is introducing a library to allow programming with contracts in the Microsoft .NET Framework 4. Adding them as a library allows all .NET languages to take advantage of contracts. This is different from Eiffel or Spec#, a language from Microsoft Research (research.microsoft.com/en-us/projects/specsharp/), where the contracts are baked into the language. Code Contracts System in .NET consists of 4 parts: 
</p>
<ul>
<li><code>System.Diagnostics.Contracts</code> contract library where <code>Contract</code> class is defined.</li>
<li><code>ccrewrite.exe</code> tool that modifies the Microsoft Intermediate Language (MSIL) instructions of an assembly to place the contract checks where they belong.</li>
<li><code>cccheck.exe</code> contract static checker, that examines code without executing it and tries to prove that all of the contracts are satisfied.</li>
<li><code>ccrefgen.exe</code> which will create separate contract reference assemblies that contain only the contracts.
</ul>
<h2>Why is it useful?</h2>
<p>
Let&#8217;s rewrote the previous example with code contracts:
</p>
<pre class="brush: csharp">
public Amount Withdraw(Amount amountToWithdraw)
{
 // preconditions..
 Contract.Requires&lt;NullReferenceException&gt;(amountToWithdraw);
 Contract.Requires(amountToWithdraw.Value);

 // action
 var result = //.. calculate operation here.. ;
 
 // postconditions 
 Contract.Ensures(result.Value <= 0);
 
 return result;
}
</pre>
<p>
I like the style, because this code a little reminds me TDD AAA (arrange/act/assert) pattern, code side is smaller and we are getting benefits of .NET Code Contracts.
</p>
<p>
What benefits here?
</p>
<ul>
<li>Static code analysis - during the compilation code is checked for contracts, if somewhere I wrote <code>account.Withdraw(null)</code> it would be immediately caught by cccheck.exe</li>
<li>Runtime execution - if error is missed on compilation time, it would be caught on run time and proper exception is thrown</li>
<li>I could configure to include or exclude contracts check at final assembly</li>
</ul>
<h2>Ok, I want to use it</h2>
<p>
To have a full support of Code Contracts you have to have .NET framework 4.0 and Visual Studio Premium or Ultimate. So, Code contracts are pretty expensive stuff. As far as I get from Dmitry speech it is possible to use <code>System.Diagnostics.Contracts</code> but limited capabilities are enabled only.
</p>
<p>
So, contract are great for building Life-critical and High-robust application where the quality / cost ratio makes sense for you.
</p>
<h2>Materials</h2>
<ul style="list-style: none outside none;">
<li><a href="http://www.slideshare.net/dmytromindra/code-contracts-abc-16042011-7656875?from=ss_embed">http://www.slideshare.net/dmytromindra/code-contracts-abc-16042011-7656875?from=ss_embed</a></li>
<li><a href="http://msdn.microsoft.com/en-us/magazine/ee236408.aspx">http://msdn.microsoft.com/en-us/magazine/ee236408.aspx</a></li>
<li><a href="http://msdn.microsoft.com/en-us/devlabs/dd491992">http://msdn.microsoft.com/en-us/devlabs/dd491992</a></li>
</ul></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/04/agilebasecamp-kiev-2011-vitaly-stakhov.html">
    
      AgileBaseCamp Kiev 2011: Vitaly Stakhov: Working safety net</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-04-18T18:23:00+03:00" pubdate data-updated="true">Apr 18<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/agile/'>Agile</a>, <a class='category' href='/blog/categories/conference/'>Conference</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
<small>
<strong>Disclaimer:</strong> text below is compilation of notes I made on AgileBaseCamp 2011 conference, listening to different speakers. I do it to keep knowledge I got on conference, share it with my colleagues and anyone else who interested. It is only about how I heard, interpret, write down the original speech. It also includes my subjective opinion on some topics. So it could not 100% reflects author opinion and original ideas. 
</small>
</p>
<p>
<a href="http://twitter.com/#!/VitalyStakhov">Vitaly</a> is a .NET developer shared really nice ideas of the creation of &#8220;safety net&#8221; with unit tests. He works in software delevelopment shop with no testers in it. Having that they manage to keep quality on acceptable level by means of test driven development practices and implemenation of safety net of tests around the product code base.
</p>
<p>
Many of TDD practitioner&#8217;s have heard this term before, but not a lot of have full understanding of it. In general &#8220;Safety Net&#8221; does not mean 100% code coverage, it either don&#8217;t nesserely mean to follow &#8220;test first&#8221; principles in creation of code. Safety net is a methaphor of net used by acrobats in circus. Acrobats are doing dangerous tricks close to cicrus ceil (that&#8217;s a bit high).. As more complex trick is more chances to fall down, but as you fall on safety net you would be still alive. So, with safety net you fail, but not die.
</p>
<p>
Another good methor about the actual position of safety net. If it put to low (close to the floor), resiliency of net might not be enought to compensate your kinetic energy during fall.. if it is put to high (close to ceil), it start to loose it sense and only interfere of making tricks.
</p>
<p>
Let&#8217;s one more time see, why we using TDD and work so hard to create tests:
</p>
<ul>
<li><strong>test driven design</strong> - indeed by having testable code you really much affect <a href="http://www.beletsky.net/2010/10/test-driven-design-and-levels-of.html">code design</a>. Design is key factor through the all life-cycle of project</li>
<li><strong>safety net creation</strong> - in other hand we do testing to follow &#8220;cover my ass&#8221; principle, having a good test coverage makes us feel really confortable and confident with application</li>
</ul>
<p>
In real life those to factors could contradict itself. When we originally create the code with TDD we are typically put too much details in test cases. We do verify for methods calls, expected exceptions, argument values etc. It works perfectly at the beginning. But as soon as we start to do refactoring it might turn to situation then a lot of cases became red, just because of implementation details changed! It leads to situation then the changes are applied, application still in workable state.. but tests are failed (safety net is put to high). That makes tests to be fragile.. fragile tests are bad, because it make to feel like &#8220;tests are not useful&#8221;.. so such tests are typically deleted, commented out, skipped. All of these is just a putting safety net low, close to floor. As for me this is even more dangerous then putting it too high.
</p>
<p>
What to do? The the of mitigation this is all the time controlling safety net position. It is very useful to distinguish 2 types of tests:
</p>
<ul>
<li>Interaction - tests that we basically create on &#8220;design&#8221; stage of application (detailed tests)</li>
<li>Component - tests that we basically create to change safety net position (behavior tests)</li>
</ul>
<p>
The point is the interaction tests are &#8220;classical&#8221; unit tests that we create for particular method/class. It works great of design stage of development, time there we have no model at all, we don&#8217;t know how internal structure would like etc. But as it said, the problem is that interaction tests are to much detailed. And as soon as small implementation detail is changed, those tests became red (I found a little analogy with blog post I did recently about <a href="http://www.beletsky.net/2011/04/functional-tests-must-not-be-done-first.html">Functional tests</a>).
</p>
<p>
To mitigate that we look on same problem with different view - components. With components tests we move focus from details to behavior. For instance if in case of moving money from one account to another, we are not particularly interested in what methods called, but we interested that amount is really moved. Type of test that actually tests that is called component.
</p>
<p>
As soon as component test is defined we are no longer interested in interaction tests. Interactions tests became overhead and only slows done the process of development by continues fixes of failed tests. So, as we already have component tests is just possible to remove interaction tests at all.
</p>
<p>
Back to our safety net analogy - with a lot of Interaction (detailed) cases, we are putting net to high, we should move it lower by getting rid of too detailed cases. To compensate that, it is important to have behavior test that would verify that application state still in workable state. This should be really careful and continues process.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/04/agilebasecamp-kiev-2011-sergey-dmitriev.html">
    
      AgileBaseCamp Kiev 2011: Sergey Dmitriev: Setting up priorities with Kano analysis</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-04-18T08:54:00+03:00" pubdate data-updated="true">Apr 18<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/agile/'>Agile</a>, <a class='category' href='/blog/categories/conference/'>Conference</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
<small>
<strong>Disclaimer:</strong> text below is compilation of notes I made on AgileBaseCamp 2011 conference, listening to different speakers. I do it to keep knowledge I got on conference, share it with my colleagues and anyone else who interested. It is only about how I heard, interpret, write down the original speech. It also includes my subjective opinion on some topics. So it could not 100% reflects author opinion and original ideas. 
</small>
</p>
<p>
<a href="http://twitter.com/#dmitriev">Sergey Dmitriev</a> is a first russian-speaking Certified Scrum Trainer. On AgileBaseCamp he presented scientific based approach for prioritizing the backlog. I liked his speech since it was very new for me and could be done on practice.
</p>
<p>
The approach is based on Kano analysis with weighted factor matrix. It might sound a little bit complex, but whole process is rather simple and splitted up on 2 stages.
</p>
<h2>Kano analysis of backlog items</h2>
<p>In very simplified version it is basically 2 questions, with 5 answers. Questions are:</p>
<ul>
<li>How do you feel that feature is PRESENT in product?</li>
<li>How do you feel that feature is ABSENT in product?</li>
</ul>
<p>
And answers are:
</p>
<ul>
<li>I like that</li>
<li>I expect that</li>
<li>I don&#8217;t care</li>
<li>I can live with that</li>
<li>I don&#8217;t like that</li>
</ul>
<p>
Each item in backlog are put through that questions. It is important that real customers to participate that survey. Due to statistics laws, as biggest sample you have as more precise results you got. Sergey has created a web application that helps to perform such surveys, <a href="http://www.kanosurvey.com/">KanoSurvey</a>.
</p>
<h2>Classification of results</h2>
<p>
Based on users answers and using some complex math behind KanoSurvey would split up all user stories up to 5 classes:
</p>
<ul>
<li><strong>Have to be done (mandatory) class</strong> - features that customers sees as very important/expected and have to be done fast</li>
<li><strong>Linear class</strong> - linear features are something that you might accomplish but still do not fully satisfy customers (like battery life of mobile phone - if it works 3 days without re-charge.. it is nice, but I would like to have 4 days. Or, if I have 1Gb of storage on new service.. it is nice, but I would like to have 2Gb etc)</li>
<li><strong>Amazing class</strong> - leadership function, something that makes you unique and produce &#8220;wow&#8221;-effect</li>
<li><strong>Inversed class</strong> - features that you you might have, but customers are feeling bad about it</li>
<li><strong>Don&#8217;t care class</strong> - features that customers not interested in</li>
<li><strong>Questionable class</strong> - these are probably mistakes, then users answering &#8220;I want, I don&#8217;t want&#8221; in the same time</li>
</ul>
<p>
The value only persist in first 3 classes of features. So, we use that in further analysis, rest of features are just thrown away are useless.
</p>
<p>
It is done. After analysis it is time for weighing.
</p>
<h2>Weighing</h2>
<p>
With Kano analysis we understood that features are important for our auditorium. Now we need to plan the feature thought releases, to do that we have to prioritize them correctly. Weighing of features helps to do right prioritization.
</p>
<p>
To perform a weighing business criteria&#8217;s have to be defined. It is very up to the product what the business criteria&#8217;s are. It is recommended to select not more than 5, that makes the process simpler. The example of criteria&#8217;s could be:
</p>
<ul>
<li>Uniqueness - weight 3</li>
<li>Sales - weight 2</li>
<li>Low costs - weight 1</li>
</ul>
<p>
Each pre-selected backlog item is assigned with weight.
</p>
<h2>Combining the results</h2>
<p>
Sergey has created an Excel spreadsheet (that is available <a href="http://www.agilecoach.ru/st/materials">here</a>). In the Excel spreadsheet we specify backlog items, estimations in points, class of Kano and it&#8217;s weight. Based on this input spreadsheet would automatically propose desired priority. It is also possible to see value and cost of particular item. This is a priceless information for any Product Owner.
</p>
<p>
The presentation slides are located <a href="http://www.slideshare.net/Blackie6/ss-7654382">here</a>.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/04/agilebasecamp-kiev-2011-alexey.html">
    
      AgileBaseCamp Kiev 2011: Alexey Krivitsky: The Future is Now</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-04-18T07:51:00+03:00" pubdate data-updated="true">Apr 18<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/agile/'>Agile</a>, <a class='category' href='/blog/categories/conference/'>Conference</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
<small>
<strong>Disclaimer:</strong> text below is compilation of notes I made on AgileBaseCamp 2011 conference, listening to different speakers. I do it to keep knowledge I got on conference, share it with my colleagues and anyone else who interested. It is only about how I heard, interpret, write down the original speech. It also includes my subjective opinion on some topics. So it could not 100% reflects author opinion and original ideas. 
</small>
</p>
<p>
That was the opening speech of <a href="http://kiev.agilebasecamp.org/">AgileBaseCamp</a> conference that took place in Kiev, 16-Apr-2011. <a href="http://twitter.com/#!/alexeykri">Alexey Krivitsky</a> who is head of ScrumGuides was sharing his vision about Agile through last years.  
</p>
<p>
The dates for this Base camp were dedicated to major event in Agile world, namely it is 10 years from <a href="http://agilemanifesto.org/">Agile Manifesto</a> has been signed. All of us know who the software development changed with this event, but was it in good way, bad way? Who know&#8217;s and Alexey tries to analyze that.
</p>
<h2>Past</h2>
<p>
Alexey shared his personal story of starting up with Agile. He used to work in big Ukrainian outsourcing company. That time (I think it was somewhere around 2003) this company was adopting CMM3 and customer company was adopting CMM2 itself. Alexey took part on both processes of adoption and did great job there (I know that, because I worked the same company that time and know that efforts were successful :). That was both good experience and key factor to change his mind on software production. He quit the company realizing that his vision very different from one dictated by CMM. 
</p>
<p>
That time Agile was not so well-spread as it is now (I&#8217;m pretty sure that time very few people in Ukraine knew something about Agile, Scrum, Kanban etc). So, having <a href="http://alistair.cockburn.us/">Alistair Cockburn</a> book printed out on corporate printer he started his journey in Agile world. Not only improving own knowledge and experience, but sharing the information with community.
</p>
<h2>Present</h2>
<p>
One of the software development institutes does statistics of projects success in 1994 and 2004. Figures are: 
</p>
<ul>
<li>1994 - success rate 15%</li>
<li>2004 - success rate 34%</li>
</ul>
<p>
This is a definitely impact of agile. There was an interesting speech about details of this impact on Agilee 2010 <a href="http://www.beletsky.net/2010/10/agileee-2010-henrik-kniberg-speech.html">Henrik Kniberg speech: The essence of Agile</a>. In a little other words in 10 years we&#8217;ve learned to &#8220;suck less&#8221;.
</p>
<p>
A lot of information about Agile nowadays. Many, many books became available.. a lot of conferences, trainings, blogs. New brands became popular as <a href="http://manifesto.softwarecraftsmanship.org/main">Software Craftsmanship</a>, <a href="http://en.wikipedia.org/wiki/Lean_Startup">Lean Startup</a>, <a href="http://www.management30.com/">Management 3.0</a> and more. From the management factors agile moving to engineering and business factors. Code is still the key in software (even if a lot of people thinks it is not). 
</p>
<h2>Future</h2>
<p>
Even with a great popularity of Agile it is still not mainstream. We still talk about Agile itself a lot and would continue to talk at least 2 years. Originally it was Waterfall as biggest enemy of Agile, but now this enemy is weak and it is no longer interesting to fight it :). Due to <a href="http://www.mountaingoatsoftware.com/company/about-mike-cohn">Mike Cohn</a> we would stop to talk about Agile at all and simply start to do that. To reach that stage we need to have crowd of people who are &#8220;on-the-same-page&#8221; with understanding of Agile, but it is not the time now. 
</p>
<p>
There is no silver bullet, but there is super glue that unite teams.. Agile is this kind of glue.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  
    <article>
        
  <h1 class="title pure-u-1">
    
    <a href="/2011/04/functional-tests-must-not-be-done-first.html">
    
      Functional tests must not be done first</a>
  </h1>

  <div class="meta pure-u-1-5">
    <div class="date icon-calendar">








  


<time datetime="2011-04-13T22:27:00+03:00" pubdate data-updated="true">Apr 13<span>th</span>, 2011</time></div>
    <div class="tags icon-tag-2">

<span class="categories">
  
    <a class='category' href='/blog/categories/tdd/'>TDD</a>
  
</span>

</div>
  </div>

  <div class="entry-content pure-u-4-5">
    <div class="content">
      <div class='post'>
<p>
First of all, by functional tests I understand tests of application features primarily from user (UI) perspective, with different set of frameworks - <a href="http://seleniumhq.org/">Seleminum</a>, <a href="http://watin.org/">Watin</a>, <a href="http://funcunit.com">FuncUnit</a> or whatever. 
</p>
<p>
I&#8217;ve seen the cases that functional tests are being implemented either first or immediately after some particular feature is implemented. I think this is a just wrong practice. Even the UI testing could definitely provide value you should think twice before getting to deep with functional testing and apply as development process rule. Functional tests have several serious drawbacks:
</p>
<ul>
<li>
<strong>Fragility</strong>. Functional tests are extremely fragile. You could run test suite and got green results and re-run them in 5 seconds and got completely red sheet. And there could be thousands of reasons why it happened.
</li>
<li>
<strong>Speed</strong>. They are simply slow. As much tests you have as slow they are. As much slow tests you have as long feedback cycle is. As long feedback cycle is as low value you are getting from tests.
</li>
<li>
<strong>Bad isolation</strong>. Because of functional tests have integration nature, it is just not possible to run them in isolated environment. Tests became depended from each other, that in particular leads to fragility.
</li>
<li>
<strong>Support</strong>. Implementation of UI test is not trivial thing. Even with so cool frameworks like <a href="http://www.beletsky.net/2010/12/functional-testing-by-javascript-with.html">FuncUnit</a> or <a href="http://seleniumhq.org/docs/03_webdriver.html">WebDrivers</a> that have strict and clear interface, it could be hard to test some UI feature of application. But support is much more harder - really small change in could turn many tests to red state. In fact, implementation of change that costs you 1 hour, could cost 1 day for correction of tests.
</li>
<li>
<strong>Changes</strong>. We are trying to adopt agile into development world, one of the aspect that makes development really agile is reacting on change. Reacting on change have to be fast. Changes are integral part of development, even if developers hate changes. But as I said above, even small change could ruin UI tests and it is not fast to fix it. It means that cost of change is getting more and more expensive. 
</li>
</ul>
<p>
So, trying to implement UI tests in early development stages or cover all applications features with UI tests is a <strong>waste</strong>. Ratio between effort / value would be just go to zero with time.
</p>
<p>
What I think as recommendation for UI testing: 
</p>
<ul>
<li>
Rely more on unit tests - all server side code must be covered with a <a href="http://www.beletsky.net/2010/10/test-driven-design-and-levels-of.html">different level of testing</a>. Units have to be isolated and fast.
</li>
<li>
Keep view as thin as possible - in ideal you should not have logic in view at all, but modern web application heavily using client side (javascript) logic that affects view. Javascript code have to be unit tested with <a href="http://docs.jquery.com/Qunit">qUnit</a> or similar frameworks.
</li>
<li>
Don&#8217;t start with UI tests - UI testing have to be done <strong>last</strong>. If the feature is just implemented it does not mean it has to be immediately tested. It has to pass PO approval, QA. Ideally it has to be released to beta group and confirmed that &#8220;this is exactly what we need&#8221;. After feature stabilized test could be added.
</li>
<li>
Don&#8217;t try to test everything - since UI testing cost more, you should be more careful. It has sense to automate smoke test, critical parts of application or parts that have high regression. 
</li>
<li>
Clean up tests regularly - peer tests regularly, if you have bunch of tests for some area that works OK for a long time you might consider to remove those tests, to speedup whole tests process.
</li>
</ul>
<p>
Keeping focus only of primary features of application and avoid of testing small stuff should be key for functional tests.
</p></div>

      
      
    </div>
  </div>

    </article>
  
  <div class="pagination inner pure-u-1">
    
      <a class="prev" href="/blog/page/13/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/11/">Newer &rarr;</a>
    
  </div>
</div></div>
	<footer class="pure-g-r"><div class="inner pure-u-1">
	<p>
		Theme developed by <a href="#">@alexbeletsky</a> | Powered by <a hfef="#">Octopress</a>
	</p>
	<p>
		Copyright © 2010 - 2013 beletsky.net
	</p>
</div>

</footer>
	<div class="buttons">
	


	
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


	
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


	
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


	

</div>
</body>
</html>